기르베르트씨와 엘리자 베타씨에 의한 이번 버그 해설


-------------------------------------------------------------------------------
【서론】
-------------------------------------------------------------------------------

343 :무명이나 음료:2009/12/25(금) 02:03:56 ID:4Jzx6JeQ
보대사에서 노예와 조수가 함께 도망하는 이벤트를 만들고 있던 것입니다만,
차 버렸으므로 질문시켜 주세요

노예와 조수를 삭제해 조교를 종료시키려고,간이조수대사의 2회째 이후에
	DELCHARA TARGET
	DELCHARA ASSI
	NEXTCOM = 999
	RETURN 0
(와)과 넣은 곳,
	EVENT_K5_ALL.ERB의 38행째에 에러가 발생했습니다
	SIF NO:TARGET != 5
	캐릭터 배열 변수 NO의 제 1 인수(6)는 캐릭터 등록 번호의 범위외입니다
라고 표시되고 강제 종료되었습니다
왜 날대사의 에러가 되는 것일까요… 



『해설이 굉장히 길어지기 때문에 먼저 에러의 해결법만 실어 두어요.
　이것은 조교 개시전의대사에서 갑자기 조교 대상을 삭제하고 있기 때문에 일어난 에러야』
「그러면 노예와 조수가 도망하는 이벤트는 만들 수 없는 것인지?」
『만들 수 있어요. 우선,조수의 삭제는 여기서 해 버려도 상관없어요.
　노예는 거치고 싶고 실마리응의@NEXTCOM999 함수에 노예의 삭제 기능이 붙어 있기 때문에,
　그쪽의 (분)편으로 삭제하면 에러 초월하지 않아도 되어』
「TFLAG:400 = 1으로 하면 좋은 것이었구나」
『그래그래. 그래서,이대로 삭제하면 등록 번호가 슬라이드해 버려
　「조수 가능하지 않은 캐릭터가 조수가 되어 있다」버그가 하는 김에 발생해 버리기 때문에,
　그것을 방지하기 위해서 NEXTCOM 선언전에 ASSI = -1도 써발 해 둬.
　그러니까,에러가 일어나지 않도록 하려면――』

	DELCHARA ASSI
	ASSI = -1
	TFLAG:400 = 1
	NEXTCOM = 999
	RETURN 0

『이것으로 거의 상정하고 있는 내용의 이벤트를 만들 수 있을 것이야.
　이하의 내용은 뭐,취미라든지호기심의 영역에서 읽어 주면 기쁘네요』



-------------------------------------------------------------------------------
【해설】
-------------------------------------------------------------------------------

「그리고,다. 무엇으로 나님의대사을 만들었었는데 국화의 에러가 되어 있는거야?」
『그것을 해설하기 전에,이벤트 함수의 이야기를 해도 돼?
　이것에 대해 이야기해 두지 않는 곳의 에러의 원인을 해설 할 수 없는거야』
「그러한 (뜻)이유라면 어쩔 수 없구나…… 로? 이벤트 함수라는 것은 무엇인 것이야?」
『그 앞에,우선은 본가 eramaker 공식 사이트의 이 페이지를 대충 읽어 와.
　감이 좋은 사람이라면 이것만으로 에러의 원인을 잡을 수 있을지도 모르네요』

http://www.hakagi.com/a.html

『어때? 에러의 원인은 이해 할 수 있었어?』
「아니…… 말하고 있는 일은 알지만,에러의 원인에는 직접 결부되지 않아」
『응,그러면 하나하나 해설해 나가요.
　그래그래,이 해설 파일은 이 페이지와 후타마도 하면서 봐 가면 좋아요』


『해설에 들어가기 전에 약간 CALL와 함수의 동작에 대해 설명시켜 주어?
　ERB 파일은 기본적으로 위로부터 차례로 내용을 읽어들이고 있어.
　그래서,CALL 된 것과 같은 함수가 있으면 그것을 호출하고 있어요. 그러니까……』

A = RAND:5
CALL era

A.ERB
	@era
	PRINT 이 함수는 더미입니다.

B.ERB
	@era
	IF A == 0
		PRINT A는 0입니다.
	ELSEIF A == 1
		PRINT A는 1입니다.
	ELSE
		PRINT A는 0도 1도 아닙니다.
	ENDIF

『무슨 상황이라고,위의 (분)편에 있는 더미 함수가 불려 버려』
「아아,그러니까 스레의 (분)편으로 『함수는 쓰지 않도록』라는 이야기가 나와 있던 것이다」
『그런 일. 캐릭터 번호의 문제로,페리쨩이나 로비노군대사의 (분)편이 읽어들여 우선도가 높지요?
그 근처와 함수가 써 버리면 최악 에러 떨어져 버리기도 하고.
　그러니까,만약대사 전용 이벤트를 만든다면 함수내에 캐릭터 번호를 붙여 두는 편이 좋아요』
「그것이 서로의 도움이 되고. 그래서,질문 좋은가」
『뭔가 질문 하는것 같은 일이 있었을까』
「있겠어. 【기본적으로 위로부터 순번】이라고 말했군. 예외도 있는지?」
『…… 너,이상한 곳에서 재빠르구나. 어느 예외. 그것이 이벤트 함수야』
「자 냉큼 설명해라. 나는 빨리 이 에러의 원인을 알고 싶다」
『알고 있어요. 그러면,드디어 이벤트 함수의 이야기군요.
　이벤트 함수라고 말하는 것은,【특정의 타이밍에 반드시 읽히는 함수】의 일.
　이것은 실물을 보는 것이 빠를까,대사 템플릿의 맨 위에 이런 부분이 있겠죠?』

;--------------------------------------------------
;대사 파일의 존재 판정(X2를 캐릭터 번호에 치환)
;--------------------------------------------------
@EVENTSHOP
#PRI
FLAG:1X2 = 1
SIF FLAG:7 == 0
FLAG:7 = 2

;--------------------------------------------------
;EVENTTRAIN 관계(X1를 캐릭터 번호에 치환)
;조교 개시시의 대사 CFLAG 201~219를 사용
;--------------------------------------------------
@EVENTTRAIN
SIF FLAG:7 <= 0
	RETURN 0
SIF NO:TARGET != X1
	RETURN 0

「아아,있구나. 이것이 무엇인 것이야?」
『이@EVENTSHOP와@EVENTTRAIN는 어느쪽이나 이벤트 함수야.
　어느쪽이나 숍 화면과 조교 개시전에 반드시 읽히고 있는 함수야】』
「흐음…… 조금 기다려,이 함수는대사 템플릿의 맨 위에 있을까?」
『있어요』
「즉,페리시아노쨩이나 그 오라버니,베스트의대사 파일에도 이 함수가 있다는 일이다.
　eramaker는 위로부터 차례로 내용을 읽고 있을 것이다?
　그렇다면 페리시아노쨩의 파일로 이것을 호출한 순간에,
　다른대사 파일에서는 불리지 않게 되는 것이 아닌 것인지?」
『그렇지만,너의대사은 분명하게 표시되고 있을까요?』
「되어 있어」
『그것은,이 이벤트 함수가【특정의 타이밍에 반드시 읽히는 함수】이니까.
　이것만은 무엇이 있으려고,존재하는 분만큼 전부 호출하고 있어』
　그래서,조금 전의 에러는 이것이 이유로써 발생한 에러인 것이야』
「존재할 뿐(만큼) 절대로 호출하기 때문에…… 아아,나의대사의 다음에,국화의대사을 읽어들인다.
　그 때에 걸려 국화대사의 에러가 되었는가」
『그런 일. 너의입우에우치에서 노예와 조수가 삭제되어 버리고 있기 때문에,
　NO:TARGET의 인수가【이미 존재하지 않는 캐릭터】를 호출해 버려 에러가 되었어.
　그러니까,조교 개시전대사의 단계에서 TARGET를 삭제하는 것은 추천하지 않아요』
「나의 조교…… 되는 것은 미안이지만,하고 있는 때도 전원 분의를 읽어들이고 있구나」
『에에. 그러니까 무심코 쓰는 법을 잘못하면,떡째리카의 조교중에 너의대사을 읽어들이거나 해요』
「어떻게 그런 실수를 일으키는거야!?」
『그러니까 잘못하지 않게 SIF NO:TARGET != X1는 IF문이 있지 않아.
　이것보다 위에 구문 쓰면 굉장한 일이 되지만 말야』


『라는 일로,해설 마지막. 만약 아직 모르는 것이 있거나
　여기 좀 더 자세하게!라는 부분이 있으면 스레의 (분)편으로 말을 걸어 받을 수 있을까』
「EVENTCOM계를 이용한 이벤트를 만드는 방법이라든지,해설하려고 생각하면 그 나름대로 재료 있고」
『그 만큼 상당히 까다롭지만 말야』







「그런데,무엇으로 에러 해결을 위해서(때문에) 거치고 싶고 실마리응의 (분)편으로 캐릭터 삭제하고 있지?」
『erahetaA에서는 EVENTCOM의 read가 전부 끝나,
　착의 체크도 전부 끝난 단계가 아니면 캐릭터 삭제로 에러 초월하는거야.
　그러면 착의 체크도 시키지 않고 강제 종료하면 좋지 않은가,라는 이야기인 것이지만
　공교롭게도 EVENTCOM로부터라면 직접 조교를 종료하는 것이 할 수 없는거야』
「팔방색인가」
『그러니까 이제(벌써) 착의 체크 끝내고 나서 삭제든지 강제 종료해 버릴까 하고.
　NEXTCOM 지정해 버리면 동작과들 하지 않고 조교가 진행하기 때문에,
그쪽에서 움직여 버리려고 생각한 결과가 있을 수 있는인것 같아요』
