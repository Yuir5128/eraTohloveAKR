;≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡
;대사 호출용 터미널 파일
;≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡≡
;--------------------------------------------------
;조교 개시대사의 호출
;--------------------------------------------------
@EVENTSHOP
#PRI
SIF FLAG:7 == 0
	FLAG:7 = 2

@EVENTTRAIN
DRAWLINE
SIF FLAG:7 <= 0 || TALENT:기절
	RETURN 0
RESULT = 0
RESULTS = 
RESULTS:1 = 
TRYCALLFORM SELECTER_K{NO:TARGET}(TARGET, 3)
IF RESULT == 1
	IF !FLAG:97
		TRYCCALLFORM KOJO%RESULTS:1%_COLOR_K{NO:TARGET}
		CATCH
			CALLFORM KOJO_COLOR_K{NO:TARGET}
		ENDCATCH
	ENDIF
	RESULT = 0
	;엑스트라 모드 구문
	$SELECT1
	TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_EXTRAMODE_K{NO:TARGET}
	CATCH
		RESULT = 0
	ENDCATCH
	IF STRLENS(RESULTS) && !RESULT
		RESULTS = 
		RESULT = 0
		TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_EXCLUSION_K{NO:TARGET}
		CATCH
			RESULT = 0
		ENDCATCH
		IF !RESULT
			RESULTS = 
			GOTO SELECT1
		ENDIF
	ENDIF
	RESULT = 0
	;조교 개시 시
	TRYCALLFORM SELECTER_K{NO:TARGET}(TARGET, 3)
	$SELECT2
	TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_EVENTTRAIN_K{NO:TARGET}
	CATCH
		RESULT = 0
	ENDCATCH
	IF STRLENS(RESULTS) && !RESULT
		RESULTS = 
		RESULT = 0
		TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_EXCLUSION_K{NO:TARGET}
		CATCH
			RESULT = 0
		ENDCATCH
		IF !RESULT
			RESULTS = 
			GOTO SELECT2
		ENDIF
	ENDIF
	IF RESULT == 1
		RESETCOLOR
		RETURN RESULT
	ENDIF
	RESULT = 0
	;간이조수대사
	TRYCALLFORM SELECTER_K{NO:TARGET}(TARGET, 3)
	$SELECT3
	IF ASSI > -1
		TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_EVENTTRAIN_ASSIPLAY_K{NO:TARGET}
		CATCH
			RESULT = 0
		ENDCATCH
	ENDIF
	IF STRLENS(RESULTS) && !RESULT
		RESULTS = 
		RESULT = 0
		TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_EXCLUSION_K{NO:TARGET}
		CATCH
			RESULT = 0
		ENDCATCH
		IF !RESULT
			RESULTS = 
			GOTO SELECT3
		ENDIF
	ENDIF
	;구텐프레의 함수를 찾아 보는 테스트
	SIF !RESULT
		TRYCALLFORM KOJO_EVENTTRAIN_K{NO:TARGET}
	RESETCOLOR
ELSEIF RESULT == 2
;	TRYCALLFORM KOJO%RESULTS:1%_EVENTTRAIN_K{NO:TARGET}
	TRYCCALLFORM KOJO%RESULTS:1%_EVENTTRAIN_K{NO:TARGET}
	CATCH
		TRYCALLFORM KOJO_EVENTTRAIN_K{NO:TARGET}
	ENDCATCH
ENDIF

;==================================================
;조교 종료시대사부
;==================================================
@EVENTEND
DRAWLINE
SIF FLAG:7 <= 0 || TALENT:기절
	RETURN 0
RESULT = 0
RESULTS = 
RESULTS:1 = 
TRYCALLFORM SELECTER_K{NO:TARGET}(TARGET, 4)
IF RESULT == 1
	IF !FLAG:97
		TRYCCALLFORM KOJO%RESULTS:1%_COLOR_K{NO:TARGET}
		CATCH
			CALLFORM KOJO_COLOR_K{NO:TARGET}
		ENDCATCH
	ENDIF
	RESULT = 0
	;조교 종료시
	$SELECT1
	TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_EVENTEND_K{NO:TARGET}
	CATCH
		RESULT = 0
	ENDCATCH
	IF STRLENS(RESULTS) && !RESULT
		RESULT = 0
		TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_EXCLUSION_K{NO:TARGET}
		CATCH
			RESULT = 0
		ENDCATCH
		IF !RESULT
			RESULTS = 
			GOTO SELECT1
		ENDIF
	ENDIF
	IF RESULT == 1
		RESETCOLOR
		RETURN RESULT
	ENDIF
	RESULT = 0
	;간이조수대사
	TRYCALLFORM SELECTER_K{NO:TARGET}(TARGET, 4)
	$SELECT2
	IF ASSI > -1
		TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_ASSIEND_K{NO:TARGET}
		CATCH
			RESULT = 0
		ENDCATCH
	ENDIF
	IF STRLENS(RESULTS) && !RESULT
		RESULT = 0
		TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_EXCLUSION_K{NO:TARGET}
		CATCH
			RESULT = 0
		ENDCATCH
		IF !RESULT
			RESULTS = 
			GOTO SELECT2
		ENDIF
	ENDIF
	;구텐프레의 함수를 찾아 보는 테스트
	SIF !RESULT
		TRYCALLFORM KOJO_EVENTEND_K{NO:TARGET}
	RESETCOLOR
ELSEIF RESULT == 2
	TRYCCALLFORM KOJO%RESULTS:1%_EVENTEND_K{NO:TARGET}
	CATCH
		RESULT = 0
	ENDCATCH
ENDIF
DRAWLINE

;--------------------------------------------------
;@KOJO_MESSAGE_COM 관계
;커맨드 실행시에 출력됩니다
;--------------------------------------------------
@KOJO_MESSAGE_COM
;텍스트를 표시하지 않는다
SIF !FLAG:6
	RETURN 0
;도구 착탈 분기를 부른다
CALL MESSAGE_VARIATION
RESULT = 0
RESULTS = 
RESULTS:1 = 
TRYCALLFORM SELECTER_K{NO:TARGET}(TARGET, 1)
LOCAL = RESULT
IF !RESULT || RESULT == 3 || FLAG:7 <= 0 || TALENT:기절
	CALL EQUIPTEXT
	CALL TRAIN_MESSAGE
	IF LOCAL == 3
		TRYCALLFORM KOJO_MESSAGE_COM_{NO:TARGET}
	ELSEIF !FLAG:152
		CALL PANT_VOICE_EX
	ENDIF
	RETURN 0
ENDIF
RESULT = 0
;대사 스킵
TRYCCALLFORM KOJO%RESULTS:1%_TRAIN_MESSAGE_SKIP_K{NO:TARGET}
CATCH
	TRYCALLFORM KOJO_TRAIN_MESSAGE_SKIP_K{NO:TARGET}
ENDCATCH
LOCAL:2 = RESULT
;PANCTION내의 장비품대사 보완 함수를 사용한다
IF !TFLAG:59
	CALL EQUIPTEXT
ENDIF
IF LOCAL:2
	CALL TRAIN_MESSAGE
	RETURN 0
ENDIF
IF LOCAL == 1
	;조건에 들어맞는 경우,대상 한정의대사 호출(커맨드별＞범용 커맨드＞범용 허덕여)→
	;→발견되지 않았으면 배타적 연산을 확인→배타 체크되어 있지 않았으면 대상비한정대사 호출(커맨드별＞범용 커맨드＞범용 허덕여)
	$SELECTER
	IF !FLAG:97
		TRYCCALLFORM KOJO%RESULTS:1%_COLOR_K{NO:TARGET}
		CATCH
			CALLFORM KOJO_COLOR_K{NO:TARGET}
		ENDCATCH
	ENDIF
	RESULT = 0
	TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_COM_K{NO:TARGET}_{SELECTCOM}
	CATCH
		RESULT = 0
	ENDCATCH
	IF !RESULT
		RESULT = 0
		TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_COMMON_EXCOM_K{NO:TARGET}
		CATCH
			RESULT = 0
		ENDCATCH
		SIF !RESULT
			CALL COMMON_KOJO_EX
		TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_EXCOM_K{NO:TARGET}_{RESULT}
		CATCH
			RESULT = 0
		ENDCATCH
	ENDIF
	IF STRLENS(RESULTS) && !RESULT
		RESULT = 0
		TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_EXCLUSION_K{NO:TARGET}
		CATCH
			RESULT = 0
		ENDCATCH
		IF !RESULT
			RESULTS = 
			GOTO SELECTER
		ELSE
			RESULT = 0
		ENDIF
	ENDIF
;	SIF !RESULT
;		CALL TRAIN_MESSAGE_COLOR
	IF !RESULT
		;구텐프레의 함수를 찾아 보는 테스트
		;아무것도 발견되지 않았으면 지문과 범용천를 호출해
		TRYCCALLFORM KOJO_MESSAGE_COM_K{NO:TARGET}
		CATCH
			CALL TRAIN_MESSAGE_COLOR
			SIF !FLAG:152
				CALL PANT_VOICE_EX
		ENDCATCH
	ENDIF
	RESETCOLOR
ELSE
	TRYCCALLFORM KOJO%RESULTS:1%_MESSAGE_COM_K{NO:TARGET}
	CATCH
		RESULT = 0
	ENDCATCH
ENDIF
RETURN RESULT

;칼라 변경해 커맨드입카미치의 문장을 호출해
@TRAIN_MESSAGE_COLOR
RESETCOLOR
CALL TRAIN_MESSAGE
IF !FLAG:97
	TRYCCALLFORM KOJO%RESULTS:1%_COLOR_K{NO:TARGET}
	CATCH
		CALLFORM KOJO_COLOR_K{NO:TARGET}
	ENDCATCH
ENDIF

;-------------------------------------------------
;@KOJO_DENIAL 관계
;커맨드 실행 판정을 트리거로 한대사과 실행 판정 조작
;실행 불가가 되기 직전에 표시된다
;-------------------------------------------------
;커맨드 실행 판정 조작
@KOJO_DENIAL_PLUS
RESULT = 0
RESULTS = 
RESULTS:1 = 
TRYCALLFORM SELECTER_K{NO:TARGET}(TARGET, 1)
SIF !RESULT
	RETURN 0
$SELECTER
RESULT = 0
TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_DENIAL_PLUS_K{NO:TARGET}
CATCH
	TRYCCALLFORM KOJO%RESULTS:1%_DENIAL_PLUS_K{NO:TARGET}
	CATCH
		RESULT = 0
	ENDCATCH
ENDCATCH
IF STRLENS(RESULTS) && !RESULT
	RESULTS = 
	GOTO SELECTER
ENDIF
RETURN RESULT

;커맨드 실행 판정을 트리거로 한대사
@KOJO_DENIAL
;텍스트를 표시하지 않는다
IF !FLAG:6
	RETURN 0
ENDIF
PRINTL 
RESULT = 0
RESULTS = 
RESULTS:1 = 
TRYCALLFORM SELECTER_K{NO:TARGET}(TARGET, 1)
LOCAL = RESULT
IF !RESULT || FLAG:7 <= 0 || RESULT == 2 || TALENT:기절
	CALL DENIAL_MESSAGE
	RETURN 0
ENDIF
RESULT = 0
$SELECTER
SIF !FLAG:97 && LOCAL
	TRYCALLFORM KOJO%RESULTS:1%_COLOR_K{NO:TARGET}
RESULT = 0
TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_DENIAL_K{NO:TARGET}_{SELECTCOM}
CATCH
	RESULT = 0
ENDCATCH
IF !RESULT
	TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_EXDENIAL_K{NO:TARGET}
	CATCH
		RESULT = 0
	ENDCATCH
ENDIF
IF STRLENS(RESULTS) && !RESULT
	RESULT = 0
	TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_EXCLUSION_K{NO:TARGET}
	CATCH
		RESULT = 0
	ENDCATCH
	IF !RESULT
		RESULTS = 
		GOTO SELECTER
	ENDIF
ENDIF
SIF !RESULT
	CALL DENIAL_MESSAGE_COLOR
RESETCOLOR
RETURN RESULT

;칼라 변경해 지문을 호출해
@DENIAL_MESSAGE_COLOR
RESETCOLOR
CALL DENIAL_MESSAGE
IF !FLAG:97
	TRYCCALLFORM KOJO%RESULTS:1%_COLOR_K{NO:TARGET}
	CATCH
		CALLFORM KOJO_COLOR_K{NO:TARGET}
	ENDCATCH
ENDIF

;-------------------------------------------------
;@KOJO_MESSAGE_PALAMCNG 관계
;파라미터 변동을 트리거로 한대사
;파라미터 변동후에대사을 발동합니다
;-------------------------------------------------
;조교자의사정텍스트
@KOJO_MESSAGE_PALAMCNG_A
;텍스트를 표시하지 않는다
SIF !FLAG:6
	RETURN 0
RESULT = 0
RESULTS = 
RESULTS:1 = 
LOCAL:2 = 0
TRYCALLFORM SELECTER_K{NO:TARGET}(TARGET,2)
LOCAL = RESULT
SIF !RESULT || RESULT == 3 || FLAG:7 <= 0 || TALENT:기절
	GOTO PALAM_MESSAGE_A
RESULT = 0
;대사 스킵
TRYCCALLFORM KOJO%RESULTS:1%_PALAM_MESSAGE_SKIP_K{NO:TARGET}
CATCH
	RESULT = 0
ENDCATCH
SIF RESULT
	GOTO PALAM_MESSAGE_A
IF LOCAL == 1
	$SELECTER
	IF !FLAG:97
		TRYCCALLFORM KOJO%RESULTS:1%_COLOR_K{NO:TARGET}
		CATCH
			CALLFORM KOJO_COLOR_K{NO:TARGET}
		ENDCATCH
	ENDIF
	;조교자 하늘사정
	IF TFLAG:164
		LOCAL:2 = 21
	;사정처 선택
	ELSEIF CFLAG:106
		LOCAL:2 = CFLAG:106
	;키스,스마타,풋잡,애널강제 봉사,더블스마타로사정
	ELSEIF TFLAG:9
		LOCAL:2 = 11
	;조수를범한다,촉수에범하게시킨다로사정
	ELSEIF TFLAG:7
		LOCAL:2 = 12
	;입로사정
	ELSEIF TFLAG:0
		LOCAL:2 = 13
	;손로사정
	ELSEIF TFLAG:1
		LOCAL:2 = 14
	;가슴로사정
	ELSEIF TFLAG:34
		LOCAL:2 = 15
	;발로사정
	ELSEIF TFLAG:16
		LOCAL:2 = 16
	ELSEIF TFLAG:2
		;애널섹스로사정
		IF SEXPLAY(TARGET) == 2
			LOCAL:2 = 17
		;섹스로사정
		ELSE
			LOCAL:2 = 18
		ENDIF
	ELSEIF SEXPLAY(TARGET) > 2 && TFLAG:12
		;역섹스로 조교 대상이 동시에사정
		IF TFLAG:10 > 0
			LOCAL:2 = 19
		;역섹스로사정
		ELSE
			LOCAL:2 = 20
		ENDIF
	ENDIF
	RESULT = 0
	TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_MESSAGE_PALAMCNG_A_K{NO:TARGET}_{LOCAL:2}
	CATCH
		RESULT = 0
	ENDCATCH
	IF STRLENS(RESULTS) && !RESULT
		RESULT = 0
		TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_EXCLUSION_K{NO:TARGET}
		CATCH
			RESULT = 0
		ENDCATCH

		IF !RESULT
			RESULTS = 
			GOTO SELECTER
		ENDIF
	ENDIF
;	SIF !RESULT
;		CALL PALAM_MESSAGE_A_COLOR
	IF !RESULT
		;구텐프레의 함수를 찾아 보는 테스트
		TRYCCALLFORM KOJO%RESULTS:1%_MESSAGE_PALAMCNG_A_K{NO:TARGET}
		CATCH
			CALL PALAM_MESSAGE_A_COLOR
		ENDCATCH
	ENDIF
	RESETCOLOR
	;조교자 이외의사정
	IF TFLAG:43
		RESULT = 0
		$SELECTER2
		IF !FLAG:97
			TRYCCALLFORM KOJO%RESULTS:1%_COLOR_K{NO:TARGET}
			CATCH
				CALLFORM KOJO_COLOR_K{NO:TARGET}
			ENDCATCH
		ENDIF
		TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_MESSAGE_PALAMCNG_A_K{NO:TARGET}_22
		CATCH
			RESULT = 0
		ENDCATCH
		IF STRLENS(RESULTS) && !RESULT
			RESULT = 0
			TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_EXCLUSION_K{NO:TARGET}
			CATCH
				RESULT = 0
			ENDCATCH

			IF !RESULT
				RESULTS = 
				GOTO SELECTER2
			ENDIF
		ENDIF
;		SIF !RESULT
;			CALL PALAM_MESSAGE_A_SUB_COLOR
		IF !RESULT
			;구텐프레의 함수를 찾아 보는 테스트
			TRYCCALLFORM KOJO%RESULTS:1%_MESSAGE_PALAMCNG_A_K{NO:TARGET}
			CATCH
				CALL PALAM_MESSAGE_A_SUB_COLOR
			ENDCATCH
		ENDIF
		RESETCOLOR
	ENDIF
ELSE
	TRYCCALLFORM KOJO%RESULTS:1%_MESSAGE_PALAMCNG_A_K{NO:TARGET}
	CATCH
		RESULT = 0
	ENDCATCH
ENDIF
RETURN RESULT

;지문을 호출해
$PALAM_MESSAGE_A
RESETCOLOR
CALL PALAM_MESSAGE_A
SIF TFLAG:43
	CALL PALAM_MESSAGE_A_SUB
RETURN 0

;칼라 변경해 지문을 호출해
@PALAM_MESSAGE_A_COLOR
RESETCOLOR
CALL PALAM_MESSAGE_A
IF !FLAG:97
	TRYCCALLFORM KOJO%RESULTS:1%_COLOR_K{NO:TARGET}
	CATCH
		CALLFORM KOJO_COLOR_K{NO:TARGET}
	ENDCATCH
ENDIF

@PALAM_MESSAGE_A_SUB_COLOR
RESETCOLOR
CALL PALAM_MESSAGE_A_SUB
IF !FLAG:97
	TRYCCALLFORM KOJO%RESULTS:1%_COLOR_K{NO:TARGET}
	CATCH
		CALLFORM KOJO_COLOR_K{NO:TARGET}
	ENDCATCH
ENDIF

;-------------------------------------------------
;@KOJO_MESSAGE_PALAMCNG 관계
;파라미터 변동을 트리거로 한대사
;파라미터 변동후에대사을 발동합니다
;-------------------------------------------------
;노예의 절정을 트리거로 한 텍스트
@KOJO_MESSAGE_PALAMCNG_B
;텍스트를 표시하지 않는다
IF !FLAG:6
	RETURN 0
ENDIF
RESULT = 0
RESULTS = 
RESULTS:1 = 
TRYCALLFORM SELECTER_K{NO:TARGET}(TARGET, 2)
LOCAL = RESULT
IF !RESULT || RESULT == 3 || FLAG:7 <= 0 || TALENT:기절
	CALL PALAM_MESSAGE_B(1)
	RETURN 0
ENDIF
RESULT = 0
;대사 스킵
TRYCCALLFORM KOJO%RESULTS:1%_PALAM_MESSAGE_SKIP_K{NO:TARGET}
CATCH
	RESULT = 0
ENDCATCH
IF RESULT
	CALL PALAM_MESSAGE_B(1)
	RETURN 0
ENDIF
IF LOCAL == 1
	$SELECTER
	IF !FLAG:97
		TRYCCALLFORM KOJO%RESULTS:1%_COLOR_K{NO:TARGET}
		CATCH
			CALLFORM KOJO_COLOR_K{NO:TARGET}
		ENDCATCH
	ENDIF
	RESULT = 0
	;절정
	IF TFLAG:29 > 0
		TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_MESSAGE_PALAMCNG_B_K{NO:TARGET}_1
		CATCH
			RESULT = 0
		ENDCATCH
	ENDIF
	IF STRLENS(RESULTS) && !RESULT
		RESULT = 0
		TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_EXCLUSION_K{NO:TARGET}
		CATCH
			RESULT = 0
		ENDCATCH
		IF !RESULT
			RESULTS = 
			GOTO SELECTER
		ENDIF
	ENDIF
	SIF !RESULT
		CALL PALAM_MESSAGE_B_COLOR
	;절정과 동시에사정/하늘사정/사정관리해제로사정
	IF TFLAG:10 > 0 || NOWEX:40
		RESULT = 0
		TRYCALLFORM SELECTER_K{NO:TARGET}(TARGET)
		$SELECTER1
		;사정관리해제로사정
		IF SELECTCOM == 134 && TEQUIP:사정관리 == 0 && TFLAG:10 > 0
			TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_MESSAGE_PALAMCNG_B_K{NO:TARGET}_2
			CATCH
				RESULT = 0
			ENDCATCH
		;하늘사정
		ELSEIF NOWEX:40
			TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_MESSAGE_PALAMCNG_B_K{NO:TARGET}_3
			CATCH
				RESULT = 0
			ENDCATCH
		;사정
		ELSE
			TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_MESSAGE_PALAMCNG_B_K{NO:TARGET}_4
			CATCH
				RESULT = 0
			ENDCATCH
		ENDIF
		IF STRLENS(RESULTS) && !RESULT
			RESULT = 0
			TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_EXCLUSION_K{NO:TARGET}
			CATCH
				RESULT = 0
			ENDCATCH

			IF !RESULT
				RESULTS = 
				GOTO SELECTER1
			ENDIF
		ENDIF
	ENDIF
	;절정과 동시에 분유
	IF TFLAG:11 > 0
		RESULT = 0
		TRYCALLFORM SELECTER_K{NO:TARGET}(TARGET)
		$SELECTER2
		TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_MESSAGE_PALAMCNG_B_K{NO:TARGET}_5
		CATCH
			RESULT = 0
		ENDCATCH
		IF STRLENS(RESULTS) && !RESULT
			RESULT = 0
			TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_EXCLUSION_K{NO:TARGET}
			CATCH
				RESULT = 0
			ENDCATCH

			IF !RESULT
				RESULTS = 
				GOTO SELECTER2
			ENDIF
		ENDIF
	ENDIF
	;절정과 동시에 방뇨
	IF TFLAG:68 > 0
		RESULT = 0
		TRYCALLFORM SELECTER_K{NO:TARGET}(TARGET)
		$SELECTER3
		TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_MESSAGE_PALAMCNG_B_K{NO:TARGET}_6
		CATCH
			RESULT = 0
		ENDCATCH
		IF STRLENS(RESULTS) && !RESULT
			RESULT = 0
			TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_EXCLUSION_K{NO:TARGET}
			CATCH
				RESULT = 0
			ENDCATCH

			IF !RESULT
				RESULTS = 
				GOTO SELECTER3
			ENDIF
		ENDIF
	ENDIF
	;절정과 동시에 탈분
	IF TFLAG:58 > 0
		RESULT = 0
		TRYCALLFORM SELECTER_K{NO:TARGET}(TARGET)
		$SELECTER4
		TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_MESSAGE_PALAMCNG_B_K{NO:TARGET}_7
		CATCH
			RESULT = 0
		ENDCATCH
		IF STRLENS(RESULTS) && !RESULT
			RESULT = 0
			TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_EXCLUSION_K{NO:TARGET}
			CATCH
				RESULT = 0
			ENDCATCH

			IF !RESULT
				RESULTS = 
				GOTO SELECTER4
			ENDIF
		ENDIF
	ENDIF
	;절정과 동시에 구토
	IF TFLAG:75 > 0
		RESULT = 0
		TRYCALLFORM SELECTER_K{NO:TARGET}(TARGET)
		$SELECTER5
		TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_MESSAGE_PALAMCNG_B_K{NO:TARGET}_8
		CATCH
			RESULT = 0
		ENDCATCH
		IF STRLENS(RESULTS) && !RESULT
			RESULT = 0
			TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_EXCLUSION_K{NO:TARGET}
			CATCH
				RESULT = 0
			ENDCATCH

			IF !RESULT
				RESULTS = 
				GOTO SELECTER5
			ENDIF
		ENDIF
	ENDIF
	IF !RESULT
		;구텐프레의 함수를 찾아 보는 테스트
		;여기의 처리에 관해서는 전혀 자신이 없다
		IF TEQUIP:볼개그 && SELECTCOM != 132
		ELSE
			TRYCALLFORM KOJO_MESSAGE_PALAMCNG_B_K{NO:TARGET}
		ENDIF
	ENDIF
	RESETCOLOR
ELSE
	TRYCCALLFORM KOJO%RESULTS:1%_MESSAGE_PALAMCNG_B_K{NO:TARGET}
	CATCH
		RESULT = 0
	ENDCATCH
ENDIF
RETURN RESULT

;칼라 변경해 지문을 호출해
@PALAM_MESSAGE_B_COLOR
RESETCOLOR
CALL PALAM_MESSAGE_B(1)
IF !FLAG:97
	TRYCCALLFORM KOJO%RESULTS:1%_COLOR_K{NO:TARGET}
	CATCH
		CALLFORM KOJO_COLOR_K{NO:TARGET}
	ENDCATCH
ENDIF

;-------------------------------------------------
;@KOJO_MESSAGE_PALAMCNG 관계
;파라미터 변동을 트리거로 한대사
;파라미터 변동후에대사을 발동합니다
;-------------------------------------------------
;조교후의 변화를 트리거로 한대사
@KOJO_MESSAGE_PALAMCNG_C
;텍스트를 표시하지 않는다
IF !FLAG:6
	RETURN 0
ENDIF
RESULT = 0
RESULTS = 
RESULTS:1 = 
TRYCALLFORM SELECTER_K{NO:TARGET}(TARGET, 2)
LOCAL = RESULT
IF !RESULT || RESULT == 3 || FLAG:7 <= 0 || TALENT:기절
	CALL PALAM_MESSAGE_C
	RETURN 0
ENDIF
RESULT = 0
;대사 스킵
TRYCCALLFORM KOJO%RESULTS:1%_PALAM_MESSAGE_SKIP_K{NO:TARGET}
CATCH
	RESULT = 0
ENDCATCH
IF RESULT
	CALL PALAM_MESSAGE_C
	RETURN 0
ENDIF
IF LOCAL == 1
	$SELECTER
	IF !FLAG:97
		TRYCCALLFORM KOJO%RESULTS:1%_COLOR_K{NO:TARGET}
		CATCH
			CALLFORM KOJO_COLOR_K{NO:TARGET}
		ENDCATCH
	ENDIF
	RESULT = 0
	;처녀상실(처녀만)
	IF TFLAG:3 > 0
		TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_MESSAGE_PALAMCNG_C_K{NO:TARGET}_1
		CATCH
			RESULT = 0
		ENDCATCH
	;동정상실
	ELSEIF TFLAG:160 == 1
		TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_MESSAGE_PALAMCNG_C_K{NO:TARGET}_2
		CATCH
			RESULT = 0
		ENDCATCH
	;백버진상실
	ELSEIF TFLAG:161 == 1
		TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_MESSAGE_PALAMCNG_C_K{NO:TARGET}_3
		CATCH
			RESULT = 0
		ENDCATCH
	ENDIF
	IF STRLENS(RESULTS) && !RESULT
		RESULT = 0
		TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_EXCLUSION_K{NO:TARGET}
		CATCH
			RESULT = 0
		ENDCATCH

		IF !RESULT
			RESULTS = 
			GOTO SELECTER
		ENDIF
	ENDIF
;	SIF !RESULT
;		CALL PALAM_MESSAGE_C_COLOR
	IF !RESULT
		;구텐프레의 함수를 찾아 보는 테스트
		;아무것도 발견되지 않았으면 지문을 호출해
		TRYCCALLFORM KOJO_MESSAGE_PALAMCNG_C_K{NO:TARGET}
		CATCH
			CALL PALAM_MESSAGE_C_COLOR
		ENDCATCH
	ENDIF
	RESETCOLOR
ELSE
	TRYCCALLFORM KOJO%RESULTS:1%_MESSAGE_PALAMCNG_C_K{NO:TARGET}
	CATCH
		RESULT = 0
	ENDCATCH
ENDIF
RETURN RESULT

;칼라 변경해 지문을 호출해
@PALAM_MESSAGE_C_COLOR
RESETCOLOR
CALL PALAM_MESSAGE_C
IF !FLAG:97
	TRYCCALLFORM KOJO%RESULTS:1%_COLOR_K{NO:TARGET}
	CATCH
		CALLFORM KOJO_COLOR_K{NO:TARGET}
	ENDCATCH
ENDIF

;-------------------------------------------------
;@KOJO_MESSAGE_PALAMCNG 관계
;파라미터 변동을 트리거로 한대사
;파라미터 변동후에대사을 발동합니다
;-------------------------------------------------
;파라미터 변화를 트리거로 한대사
@KOJO_MESSAGE_PALAMCNG_D
;텍스트를 표시하지 않는다
IF !FLAG:6
	RETURN 0
ENDIF
RESULT = 0
RESULTS = 
RESULTS:1 = 
TRYCALLFORM SELECTER_K{NO:TARGET}(TARGET, 2)
LOCAL = RESULT
IF RESULT == 3
	CALL PALAM_MESSAGE_D
	TRYCALLFORM KOJO_MESSAGE_PALAMCNG_{NO:TARGET}
	RETURN 0
ELSEIF !RESULT || FLAG:7 <= 0 || TALENT:기절
	CALL PALAM_MESSAGE_D
	RETURN 0
ENDIF
RESULT = 0
;대사 스킵
TRYCCALLFORM KOJO%RESULTS:1%_PALAM_MESSAGE_SKIP_K{NO:TARGET}
CATCH
	RESULT = 0
ENDCATCH
IF RESULT
	CALL PALAM_MESSAGE_D
	RETURN 0
ENDIF
IF LOCAL == 1
	$SELECTER
	IF !FLAG:97
		TRYCCALLFORM KOJO%RESULTS:1%_COLOR_K{NO:TARGET}
		CATCH
			CALLFORM KOJO_COLOR_K{NO:TARGET}
		ENDCATCH
	ENDIF
	RESULT = 0
	TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_MESSAGE_PALAMCNG_D_K{NO:TARGET}_1
	CATCH
		RESULT = 0
	ENDCATCH
	IF STRLENS(RESULTS) && !RESULT
		RESULT = 0
		TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_EXCLUSION_K{NO:TARGET}
		CATCH
			RESULT = 0
		ENDCATCH

		IF !RESULT
			RESULTS = 
			GOTO SELECTER
		ENDIF
	ENDIF
;	SIF !RESULT
;		CALL PALAM_MESSAGE_D_COLOR
	IF !RESULT
		;구텐프레의 함수를 찾아 보는 테스트
		;아무것도 발견되지 않았으면 지문을 호출해
		TRYCCALLFORM KOJO_MESSAGE_PALAMCNG_D_K{NO:TARGET}
		CATCH
			CALL PALAM_MESSAGE_D_COLOR
		ENDCATCH
	ENDIF
	RESETCOLOR
ELSE
	TRYCCALLFORM KOJO%RESULTS:1%_MESSAGE_PALAMCNG_D_K{NO:TARGET}
	CATCH
		TRYCALLFORM KOJO_MESSAGE_PALAMCNG_D_K{NO:TARGET}
	ENDCATCH
ENDIF
RETURN RESULT

;칼라 변경해 지문을 호출해
@PALAM_MESSAGE_D_COLOR
RESETCOLOR
CALL PALAM_MESSAGE_D
IF !FLAG:97
	TRYCCALLFORM KOJO%RESULTS:1%_COLOR_K{NO:TARGET}
	CATCH
		CALLFORM KOJO_COLOR_K{NO:TARGET}
	ENDCATCH
ENDIF

;-------------------------------------------------
;@KOJO_MESSAGE_PALAMCNG 관계
;파라미터 변동을 트리거로 한대사
;파라미터 변동후에대사을 발동합니다
;-------------------------------------------------
;촉수가사정
@KOJO_MESSAGE_PALAMCNG_E
;텍스트를 표시하지 않는다
IF !FLAG:6
	RETURN 0
ENDIF
;촉수가사정 하고 있지 않으면 돌아온다
SIF TFLAG:15 <= 0
	RETURN 0
RESULT = 0
RESULTS = 
RESULTS:1 = 
TRYCALLFORM SELECTER_K{NO:TARGET}(TARGET,2)
LOCAL = RESULT
IF !RESULT || RESULT == 3 || FLAG:7 <= 0 || TALENT:기절
	CALL PALAM_MESSAGE_E
	RETURN 0
ENDIF
RESULT = 0
;대사 스킵
TRYCCALLFORM KOJO%RESULTS:1%_PALAM_MESSAGE_SKIP_K{NO:TARGET}
CATCH
	RESULT = 0
ENDCATCH
IF RESULT
	CALL PALAM_MESSAGE_E
	RETURN 0
ENDIF
IF LOCAL == 1
	$SELECTER
	IF !FLAG:97
		TRYCCALLFORM KOJO%RESULTS:1%_COLOR_K{NO:TARGET}
		CATCH
			CALLFORM KOJO_COLOR_K{NO:TARGET}
		ENDCATCH
	ENDIF
	RESULT = 0
	TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_MESSAGE_PALAMCNG_E_K{NO:TARGET}_1
	CATCH
		RESULT = 0
	ENDCATCH
	IF STRLENS(RESULTS) && !RESULT
		RESULT = 0
		TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_EXCLUSION_K{NO:TARGET}
		CATCH
			RESULT = 0
		ENDCATCH

		IF !RESULT
			RESULTS = 
			GOTO SELECTER
		ENDIF
	ENDIF
;	SIF !RESULT
;		CALL PALAM_MESSAGE_E_COLOR
	IF !RESULT
		;구텐프레의 함수를 찾아 보는 테스트
		;아무것도 발견되지 않았으면 지문을 호출해
		TRYCCALLFORM KOJO_MESSAGE_PALAMCNG_E_K{NO:TARGET}
		CATCH
			CALL PALAM_MESSAGE_E_COLOR
		ENDCATCH
	ENDIF
	RESETCOLOR
ELSE
	TRYCCALLFORM KOJO%RESULTS:1%_MESSAGE_PALAMCNG_E_K{NO:TARGET}
	CATCH
		RESULT = 0
	ENDCATCH
ENDIF
RETURN RESULT

;칼라 변경해 지문을 호출해
@PALAM_MESSAGE_E_COLOR
RESETCOLOR
CALL PALAM_MESSAGE_E
IF !FLAG:97
	TRYCCALLFORM KOJO%RESULTS:1%_COLOR_K{NO:TARGET}
	CATCH
		CALLFORM KOJO_COLOR_K{NO:TARGET}
	ENDCATCH
ENDIF

;-------------------------------------------------
;@KOJO_MESSAGE_MARKCNG 관계
;각인 변동을 트리거로 한대사
;각인 변동후에대사을 발동합니다
;-------------------------------------------------
@KOJO_MESSAGE_MARKCNG
;텍스트를 표시하지 않는다
IF !FLAG:6
	RETURN 0
ENDIF
RESULT = 0
RESULTS = 
RESULTS:1 = 
TRYCALLFORM SELECTER_K{NO:TARGET}(TARGET,2)
LOCAL = RESULT
IF !RESULT || RESULT == 3 || FLAG:7 <= 0 || TALENT:기절
	CALL MARK_MESSAGE
	SIF LOCAL == 3
		TRYCALLFORM KOJO_MESSAGE_MARKCNG_{NO:TARGET}
	RETURN 0
ENDIF
RESULT = 0
;대사 스킵
TRYCCALLFORM KOJO%RESULTS:1%_PALAM_MESSAGE_SKIP_K{NO:TARGET}
CATCH
	TRYCALLFORM KOJO_PALAM_MESSAGE_SKIP_K{NO:TARGET}
ENDCATCH
IF RESULT
	CALL MARK_MESSAGE
	RETURN 0
ENDIF
IF LOCAL == 1
	$SELECTER
	IF !FLAG:97
		TRYCCALLFORM KOJO%RESULTS:1%_COLOR_K{NO:TARGET}
		CATCH
			CALLFORM KOJO_COLOR_K{NO:TARGET}
		ENDCATCH
	ENDIF
	RESULT = 0
	;고통각인
	IF TFLAG:22
		TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_MESSAGE_MARKCNG_K{NO:TARGET}_1_{TFLAG:22}
		CATCH
			RESULT = 0
		ENDCATCH
		IF RESULT
			LOCAL = 0
		ELSE
			CALL MARK_MESSAGE_COLOR("A")
		ENDIF
	ENDIF
	;쾌락각인
	IF TFLAG:23
		TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_MESSAGE_MARKCNG_K{NO:TARGET}_2_{TFLAG:23}
		CATCH
			RESULT = 0
		ENDCATCH
		IF RESULT
			LOCAL = 0
		ELSE
			CALL MARK_MESSAGE_COLOR("P")
		ENDIF
	ENDIF
	;굴복각인
	IF TFLAG:24
		TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_MESSAGE_MARKCNG_K{NO:TARGET}_3_{TFLAG:24}
		CATCH
			RESULT = 0
		ENDCATCH
		IF RESULT
			LOCAL = 0
		ELSE
			CALL MARK_MESSAGE_COLOR("S")
		ENDIF
	ENDIF
	;반발각인
	IF TFLAG:21
		TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_MESSAGE_MARKCNG_K{NO:TARGET}_4_{TFLAG:21}
		CATCH
		ENDCATCH
		IF RESULT
			LOCAL = 0
		ELSE
			CALL MARK_MESSAGE_COLOR("R")
		ENDIF
	ENDIF
	IF STRLENS(RESULTS) && !LOCAL
		RESULT = 0
		TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_EXCLUSION_K{NO:TARGET}
		CATCH
			RESULT = 0
		ENDCATCH

		IF !RESULT
			RESULTS = 
			GOTO SELECTER
		ENDIF
	ENDIF
	IF !RESULT && LOCAL
		;구텐프레의 함수를 찾아 보는 테스트
		TRYCCALLFORM KOJO_MESSAGE_MARKCNG_K{NO:TARGET}
			RESULT = 1
			LOCAL = 0
		CATCH
			RESULT = 0
		ENDCATCH
	ENDIF
	IF !RESULT && LOCAL
		;아무것도 발견되지 않았으면 지문을 호출해
		CALL MARK_MESSAGE_COLOR
	ENDIF
	RESETCOLOR
ELSE
	TRYCCALLFORM KOJO%RESULTS:1%_MESSAGE_MARKCNG_K{NO:TARGET}
	CATCH
		RESULT = 0
	ENDCATCH
ENDIF
RETURN RESULT

;칼라 변경해 지문을 호출해
@MARK_MESSAGE_COLOR(ARGS)
RESETCOLOR
IF STRLENS(ARGS)
	CALLFORM MARK_MESSAGE_%ARGS%
ELSEIF !FLAG:97
	TRYCCALLFORM KOJO%RESULTS:1%_COLOR_K{NO:TARGET}
	CATCH
		CALLFORM KOJO_COLOR_K{NO:TARGET}
	ENDCATCH
ELSE
	CALL MARK_MESSAGE
ENDIF

;-------------------------------------------------
;@KOJO_MESSAGE_MARKCNG 관계
;커맨드 실행후에 표시되는대사
;-------------------------------------------------
@KOJO_MESSAGE_COMEND
;텍스트를 표시하지 않는다
SIF !FLAG:6
	RETURN 0
RESULT = 0
RESULTS = 
RESULTS:1 = 
TRYCALLFORM SELECTER_K{NO:TARGET}(TARGET, 2)
LOCAL = RESULT
SIF !RESULT || RESULT == 3 || FLAG:7 <= 0 || TALENT:기절
	RETURN 0
RESULT = 0
;대사 스킵
TRYCCALLFORM KOJO%RESULTS:1%_PALAM_MESSAGE_SKIP_K{NO:TARGET}
CATCH
	RESULT = 0
ENDCATCH
SIF RESULT
	RETURN 0
IF LOCAL == 1
	$SELECTER
	IF !FLAG:97
		TRYCCALLFORM KOJO%RESULTS:1%_COLOR_K{NO:TARGET}
		CATCH
			CALLFORM KOJO_COLOR_K{NO:TARGET}
		ENDCATCH
	ENDIF
	RESULT = 0
	TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_EXCOMEND_K{NO:TARGET}
	CATCH
		RESULT = 0
	ENDCATCH
	IF STRLENS(RESULTS) && !RESULT
		RESULT = 0
		TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_EXCLUSION_K{NO:TARGET}
		CATCH
			RESULT = 0
		ENDCATCH
		IF !RESULT
			RESULTS = 
			GOTO SELECTER
		ENDIF
	ENDIF
	RESETCOLOR
ELSE
	TRYCCALLFORM KOJO%RESULTS:1%_EXCOMEND_K{NO:TARGET}
	CATCH
		TRYCALLFORM KOJO_EXCOMEND_K_K{NO:TARGET}
	ENDCATCH
ENDIF
RETURN RESULT


;-------------------------------------------------
;@KOJO_MESSAGE_EVENT 관계
;이벤트시의대사,이벤트 개시시에 출력합니다
;-------------------------------------------------
@KOJO_MESSAGE_EVENT
;텍스트를 표시하지 않는다
IF !FLAG:6
	RETURN 0
ENDIF
;TARGET 없으면 돌아간다!
IF TARGET < 0
	CALL EVENT_MESSAGE
	RETURN 0
ENDIF
LOCAL:1 = 0
;연모·복종 상태가 현재의 주인답게 없을 때,상태를 보존해 대응(TARGET만)
IF (KANRAKU2(TARGET) == 1 || KANRAKU2(TARGET) == 3) && TALENT:(CFLAG:39) != (CFLAG:41 == NO:MASTER)
	LOCAL:1 = 1
	;LOCAL:2에 있어야 할연모·복종의 값을 대입해 현재의 값과 교체
	LOCAL:2 = (CFLAG:41 == NO:MASTER)
	SWAP TALENT:(CFLAG:39),LOCAL:2
	;상사상애 때의 처리
	SIF CFLAG:39 == 165
		TALENT:친애 = TALENT:상사상애
ENDIF
RESULT = 0
RESULTS = 
RESULTS:1 = 
TRYCALLFORM SELECTER_K{NO:TARGET}(TARGET, 5)
LOCAL = RESULT
IF !RESULT || RESULT == 3 || FLAG:7 <= 0 || TALENT:기절
	CALL EVENT_MESSAGE
	SIF LOCAL == 3
		TRYCALLFORM SELF_KOJO_K{NO:TARGET}
	RESULT = 0
	GOTO END
ENDIF
RESULT = 0
;대사 스킵
TRYCCALLFORM KOJO%RESULTS:1%_EVENT_MESSAGE_SKIP_K{NO:TARGET}
CATCH
	RESULT = 0
ENDCATCH
IF RESULT
	CALL EVENT_MESSAGE
	RESULT = 0
	GOTO END
ENDIF
IF LOCAL == 1
	$SELECTER
	IF !FLAG:97
		TRYCCALLFORM KOJO%RESULTS:1%_COLOR_K{NO:TARGET}
		CATCH
			CALLFORM KOJO_COLOR_K{NO:TARGET}
		ENDCATCH
	ENDIF
	RESULT = 0
	TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_MESSAGE_EVENT_K{NO:TARGET}_{TFLAG:13}
	CATCH
		RESULT = 0
	ENDCATCH
	IF STRLENS(RESULTS) && !RESULT
		RESULT = 0
		TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_EXCLUSION_K{NO:TARGET}
		CATCH
			RESULT = 0
		ENDCATCH

		IF !RESULT
			RESULTS = 
			GOTO SELECTER
		ENDIF
	ENDIF
;	SIF !RESULT
;		CALL EVENT_MESSAGE_COLOR
	IF !RESULT
		;구텐프레의 함수를 찾아 보는 테스트
		;아무것도 발견되지 않았으면 지문을 호출해
		TRYCCALLFORM KOJO_MESSAGE_EVENT_K{NO:TARGET}
		CATCH
			CALL EVENT_MESSAGE_COLOR
		ENDCATCH
	ENDIF
	RESETCOLOR
ELSE
	TRYCCALLFORM KOJO%RESULTS:1%_MESSAGE_EVENT_K{NO:TARGET}
	CATCH
		RESULT = 0
	ENDCATCH
ENDIF
$END
;연모·복종를 원 상태에 되돌린다
IF LOCAL:1
	TALENT:(CFLAG:39) = LOCAL:2
	;상사상애 때의 처리
	SIF CFLAG:39 == 165
		TALENT:친애 = LOCAL:2
ENDIF
RETURN RESULT

;칼라 변경해 지문을 호출해
@EVENT_MESSAGE_COLOR
RESETCOLOR
CALL EVENT_MESSAGE
IF !FLAG:97
	TRYCCALLFORM KOJO%RESULTS:1%_COLOR_K{NO:TARGET}
	CATCH
		CALLFORM KOJO_COLOR_K{NO:TARGET}
	ENDCATCH
ENDIF

;-------------------------------------------------
;@DAILY_LIFE_MASSAGE 관계
;휴게 실행시에 출력합니다
;선택되는 것은 반드시 TARGET라고는 할 수 없습니다(대사주는 A에 들어가 있습니다)
;-------------------------------------------------
@DAILY_LIFE_MASSAGE
RESULT = 0
RESULTS = 
RESULTS:1 = 
TRYCALLFORM SELECTER_K{NO:A}(A, 5)
IF !RESULT || FLAG:7 <= 0
	RETURN 0
ELSEIF RESULT == 1
	$SELECTER
	IF !FLAG:97
		TRYCCALLFORM KOJO%RESULTS:1%_COLOR_K{NO:A}
		CATCH
			CALLFORM KOJO_COLOR_K{NO:A}
		ENDCATCH
	ENDIF
	RESULT = 0
	TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_DAILY_LIFE_MASSAGE_K{NO:A}
	CATCH
		RESULT = 0
	ENDCATCH
	IF STRLENS(RESULTS) && !RESULT
		RESULT = 0
		TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_EXCLUSION_K{NO:A}
		CATCH
			RESULT = 0
		ENDCATCH
		IF !RESULT
			RESULTS = 
			GOTO SELECTER
		ENDIF
	ENDIF
	RESETCOLOR
ELSE
	RESULT = 0
	TRYCCALLFORM KOJO%RESULTS:1%_DAILY_LIFE_MASSAGE_K{NO:A}
	CATCH
		RESULT = 0
	ENDCATCH
ENDIF
RETURN RESULT

;-------------------------------------------------
;@KOJO_MESSAGE_ENDING 관계
;이벤트시의대사,이벤트 개시시에 출력합니다
;-------------------------------------------------
@KOJO_MESSAGE_ENDING
;연모·복종를 현재의 주인에 맞춘다
CALL MASTER_CHANGE_ON
CALL MASTER_CHANGE_OFF
RESULT = 0
RESULTS = 
RESULTS:1 = 
TRYCALLFORM SELECTER_K{NO:TARGET}(TARGET, 6)
LOCAL = RESULT
SIF !RESULT
	RETURN 0
IF LOCAL == 1
	$SELECTER
	IF !FLAG:97
		TRYCCALLFORM KOJO%RESULTS:1%_COLOR_K{NO:TARGET}
		CATCH
			CALLFORM KOJO_COLOR_K{NO:TARGET}
		ENDCATCH
	ENDIF
	RESULT = 0
	;친애단체[單体] 엔드
	IF TALENT:친애 && CFLAG:21 == 1
		TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_MESSAGE_ENDING_K{NO:TARGET}_1
		CATCH
			RESULT = 0
		ENDCATCH
	;창부단체[單体] 엔드
	ELSEIF TALENT:창부 && CFLAG:21 == 1
		TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_MESSAGE_ENDING_K{NO:TARGET}_2
		CATCH
			RESULT = 0
		ENDCATCH
	;예속단체[單体] 엔드
	ELSEIF TALENT:예속 && CFLAG:21 == 1
		TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_MESSAGE_ENDING_K{NO:TARGET}_3
		CATCH
			RESULT = 0
		ENDCATCH
	ENDIF
	;특수하렘 엔드
	IF CFLAG:21 == 2
		TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_MESSAGE_ENDING_K{NO:TARGET}_4
		CATCH
			RESULT = 0
		ENDCATCH
	ENDIF
	IF STRLENS(RESULTS) && !RESULT
		RESULT = 0
		TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_EXCLUSION_K{NO:TARGET}
		CATCH
			RESULT = 0
		ENDCATCH

		IF !RESULT
			RESULTS = 
			GOTO SELECTER
		ENDIF
	ENDIF
	;구텐프레의 함수를 찾아 보는 테스트
	IF !RESULT
		TRYCCALLFORM KOJO_MESSAGE_ENDING_K{NO:TARGET}
			RESULT = 1
		CATCH
			RESULT = 0
		ENDCATCH
	ENDIF
	RESETCOLOR
	SIF !RESULT
		RETURN 0
	CALL GAME_CONTINUE
ELSEIF LOCAL == 2
	TRYCCALLFORM KOJO%RESULTS:1%_MESSAGE_ENDING_K{NO:TARGET}
	CATCH
		RESULT = 0
	ENDCATCH
ELSE
	TRYCALLFORM SINGLE_ENDING_K{NO:TARGET}
ENDIF
RETURN RESULT

;-------------------------------------------------
;캐릭터별의 매각후에피소드
;-------------------------------------------------
@SET_SLAVE_AFTERWARDS
RESULT = 0
RESULTS = 
RESULTS:1 = 
TRYCALLFORM SELECTER_K{NO:TARGET}(TARGET, 7)
LOCAL = RESULT
IF !RESULT
	RETURN 0
ENDIF
IF LOCAL == 1
	$SELECTER
	IF !FLAG:97
		TRYCCALLFORM KOJO%RESULTS:1%_COLOR_K{NO:TARGET}
		CATCH
			CALLFORM KOJO_COLOR_K{NO:TARGET}
		ENDCATCH
	ENDIF
	RESULT = 0
	TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_SET_SLAVE_AFTERWARDS_K{NO:TARGET}
	CATCH
		RESULT = 0
	ENDCATCH
	IF STRLENS(RESULTS) && !RESULT
		RESULT = 0
		TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_EXCLUSION_K{NO:TARGET}
		CATCH
			RESULT = 0
		ENDCATCH

		IF !RESULT
			RESULTS = 
			GOTO SELECTER
		ENDIF
	ENDIF
	;구텐프레의 함수를 찾아 보는 테스트
	SIF !RESULT
		TRYCALLFORM SET_SLAVE_AFTERWARDS_K{NO:TARGET}
	RESETCOLOR
ELSE
	TRYCALLFORM SET_SLAVE_AFTERWARDS_K{NO:TARGET}
ENDIF
RETURN RESULT

;매각후에 사용하므로 NO:TARGET는 사용할 수 없다
@SHOW_SLAVE_AFTERWARDS
RESULT = 0
RESULTS = 
RESULTS:1 = 
TRYCALLFORM SELECTER_K{X}(X, 7)
LOCAL = RESULT
IF !RESULT
	RETURN 0
ENDIF
IF LOCAL == 1
	$SELECTER
	IF !FLAG:97
		TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_COLOR_K{X}
		CATCH
			RESULT = 0
		ENDCATCH
	ENDIF
	RESULT = 0
	TRYCCALLFORM KOJO%RESULTS:1%%RESULTS%_SHOW_SLAVE_AFTERWARDS_K{X}
	CATCH
		RESULT = 0
	ENDCATCH
	IF STRLENS(RESULTS) && !RESULT
		RESULTS = 
		GOTO SELECTER
	ENDIF
	;구텐프레의 함수를 찾아 보는 테스트
	SIF !RESULT
		TRYCALLFORM SHOW_SLAVE_AFTERWARDS_K{X}
	RESETCOLOR
ELSE
	TRYCALLFORM SHOW_SLAVE_AFTERWARDS_K{X}
ENDIF
RETURN RESULT

;-------------------------------------------------
;주인공에 의해 분기 하는 오프닝대사 1
;공통의 오프닝의 앞에 불려 간다
;-------------------------------------------------
@KOJO_PRE_OPENING_STORY
TRYCALLFORM KOJO_PRE_OPENING_STORY_K{NO:MASTER}
RETURN RESULT

;-------------------------------------------------
;주인공에 의해 분기 하는 오프닝대사 2
;공통의 오프닝의후에 불려 간다
;-------------------------------------------------
@KOJO_POST_OPENING_STORY
TRYCALLFORM KOJO_POST_OPENING_STORY_K{NO:MASTER}

;-------------------------------------------------
;주인공에 의해 분기 하는 배드 엔드 1대사
;일수 초과 배드 엔드시에 불러내진다
;-------------------------------------------------
@KOJO_BAD1_ENDING_STORY
TRYCALLFORM KOJO_BAD1_ENDING_STORY_K{NO:MASTER}
RETURN RESULT

;-------------------------------------------------
;주인공에 의해 분기 하는 배드 엔드 2대사
;소지금이 바닥난 엔드의후에 표시된다
;-------------------------------------------------
@KOJO_BAD2_ENDING_STORY
TRYCALLFORM KOJO_BAD2_ENDING_STORY_K{NO:MASTER}
RETURN RESULT

;-------------------------------------------------
;주인공에 의해 분기 하는 노멀 엔드대사
;노멀 엔드시에 불려 간다
;-------------------------------------------------
@KOJO_NORMAL_ENDING_STORY
TRYCALLFORM KOJO_NORMAL_ENDING_STORY_K{NO:MASTER}
RETURN RESULT


