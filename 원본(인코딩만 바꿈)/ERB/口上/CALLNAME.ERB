
;--------------------------------------------------
;呼び名関連
;こっちにまとめました。
;あだ名で呼ばせたり、陥落素質で呼び名を変更したいキャラ向け。
;@PNAME_○はキャラの番号入れてね
;--------------------------------------------------

;テンプレ兼ねて堀川君
@PNAME_99
IF ASSIPLAY
	R = TARGET
	CALL MASTER_SEARCH
	IF N > 0 && M == NO:ASSI
		PRINTFORM %STR:102%
	ELSE
		;兼さん
		IF NO:ASSI == 91
			PRINT 兼さん
		ELSE
			PRINTFORM %CALLNAME:ASSI%
		ENDIF
	ENDIF
ELSE
	;兼さん
	IF NO:MASTER == 91
		PRINT 兼さん
	ELSE
		PRINTFORM %CALLNAME:MASTER%
	ENDIF
ENDIF

;呼ばせるときは↓
;
;PRINTFORM 「
;			CALL PNAME_99
;PRINTFORMW 、やったよ！」
;
;↑のようにすると、本文で
;「兼さん、やったよ！」
;と表示されます。
;CALLの前にタブで空白入れてるのは見やすくするためなので特に意味無し。
;CALL PNAME_99の前の行を「PRINTFORML」や「PRINTFORMW」にすると改行されてしまうので注意。


@PNAME_87
IF ASSIPLAY
	R = TARGET
	CALL MASTER_SEARCH
	IF N > 0 && M == NO:ASSI
		PRINTFORM %STR:102%
	ELSE
		;審神者
		IF NO:ASSI == 0
			PRINTFORM 
			CALL PNAME_87_MASTER
		ELSE
			PRINTFORM %CALLNAME:ASSI%
		ENDIF
	ENDIF
ELSE
	;審神者
	IF NO:MASTER == 0
		PRINTFORM 
		CALL PNAME_87_MASTER
	ELSE
		PRINTFORM %CALLNAME:MASTER%
	ENDIF
ENDIF


@PNAME_87_2
PRINTFORML 
PRINTFORML %CALLNAME%にどう呼んでもらうかを選択できます
PRINTFORML [0] きみ
PRINTFORML [1] お前
PRINTFORML [2] 主
IF KANRAKU(TARGET)
	PRINTFORML [3] 主様
	PRINTFORML [4] ご主人様
	SIF !TALENT:MASTER:オトコ && !TALENT:MASTER:半陰半陽
		PRINTFORML [5] 女王様
ENDIF
PRINTFORML [6] %CALLNAME:MASTER%（呼び捨て）
IF KANRAKU(TARGET)
	PRINTFORML [7] %CALLNAME:MASTER%さん（さん付け）
	IF TALENT:MASTER:オトコ || TALENT:MASTER:半陰半陽
		PRINTFORML [8] %CALLNAME:MASTER%君（君付け）
	ELSE
		PRINTFORML [8] %CALLNAME:MASTER%ちゃん（ちゃん付け）
	ENDIF
	PRINTFORML [9] %CALLNAME:MASTER%様（様付け）
ENDIF
$INPUT_LOOP
INPUT
IF RESULT == 0
	CSTR:87 = きみ
	CFLAG:640 = 1
ELSEIF RESULT == 1
	CSTR:87 = お前
	CFLAG:640 = 2
ELSEIF RESULT == 2
	CSTR:87 = 主
	CFLAG:640 = 3
ELSEIF RESULT == 3 && KANRAKU(TARGET)
	CSTR:87 = 主様
	CFLAG:640 = 4
ELSEIF RESULT == 4 && KANRAKU(TARGET)
	CSTR:87 = ご主人様
	CFLAG:640 = 5
ELSEIF RESULT == 5 && KANRAKU(TARGET)
	CSTR:87 = 女王様
	CFLAG:640 = 6
ELSEIF RESULT == 6
	CSTR:87 = %CALLNAME:MASTER%
	CFLAG:640 = 0
ELSEIF RESULT == 7 && KANRAKU(TARGET)
	CSTR:87 = %CALLNAME:MASTER%さん
	CFLAG:640 = 7
ELSEIF RESULT == 8 && KANRAKU(TARGET)
	IF TALENT:MASTER:オトコ || TALENT:MASTER:半陰半陽
		CSTR:87 = %CALLNAME:MASTER%君
		CFLAG:640 = 8
	ELSE
		CSTR:87 = %CALLNAME:MASTER%ちゃん
		CFLAG:640 = 9
	ENDIF
ELSEIF RESULT == 9 && KANRAKU(TARGET)
	CSTR:87 = %CALLNAME:MASTER%様
	CFLAG:640 = 10
ELSE
	GOTO INPUT_LOOP
ENDIF
PRINTFORML %CALLNAME%から%CALLNAME:MASTER%の呼び名をを【%CSTR:87%】に決めました
PRINTFORML よろしいですか？
PRINTFORML [0] 【%CSTR:87%】で良い
PRINTFORML [1] もう一度考える
$INPUT_LOOP5
INPUT
IF RESULT == 0
ELSE
	RESTART
ENDIF

@PNAME_87_MASTER
IF CFLAG:640 == 1
	PRINTFORM きみ
ELSEIF CFLAG:640 == 2
	PRINTFORM お前
ELSEIF CFLAG:640 == 3
	PRINTFORM 主
ELSEIF CFLAG:640 == 4
	PRINTFORM 主様
ELSEIF CFLAG:640 == 5
	PRINTFORM ご主人様
ELSEIF CFLAG:640 == 6
	PRINTFORM 女王様
ELSEIF CFLAG:640 == 7
	PRINTFORM %CALLNAME:MASTER%さん
ELSEIF CFLAG:640 == 8
	PRINTFORM %CALLNAME:MASTER%君
ELSEIF CFLAG:640 == 9
	PRINTFORM %CALLNAME:MASTER%ちゃん
ELSEIF CFLAG:640 == 10
	PRINTFORM %CALLNAME:MASTER%様
ELSE
	PRINTFORM %CALLNAME:MASTER%
ENDIF


;------------------------------
;燭台切さんからの呼び方
;大倶利伽羅の呼び方とか、好みが分かれそうなので
;------------------------------
;大倶利伽羅
@PNAME_73_116
IF ASSIPLAY
	R = TARGET
	CALL MASTER_SEARCH
	IF N > 0 && M == NO:ASSI
		PRINTFORM %STR:102%
	ELSE
		IF NO:ASSI == 116
			;呼ばせ方を変える場合はここ↓と
			PRINT 伽羅ちゃん
		ELSE
			PRINTFORM %CALLNAME:ASSI%
		ENDIF
	ENDIF
ELSE
	IF NO:MASTER == 116
		;ここ↓を書き換えたらいけるはず
		PRINT 伽羅ちゃん
	ELSE
		PRINTFORM %CALLNAME:MASTER%
	ENDIF
ENDIF

;鶴丸
@PNAME_73_130
IF ASSIPLAY
	R = TARGET
	CALL MASTER_SEARCH
	IF N > 0 && M == NO:ASSI
		PRINTFORM %STR:102%
	ELSE
		IF NO:ASSI == 130
			;呼ばせ方を変える場合はここ↓と
			PRINT 鶴さん
		ELSE
			PRINTFORM %CALLNAME:ASSI%
		ENDIF
	ENDIF
ELSE
	IF NO:MASTER == 130
		;ここ↓を書き換えたらいけるはず
		PRINT 鶴さん
	ELSE
		PRINTFORM %CALLNAME:MASTER%
	ENDIF
ENDIF


;-------------------------
;鶯丸からの呼ばれ方
;-------------------------

@PNAME_55
IF ASSIPLAY
	R = TARGET
	CALL MASTER_SEARCH
	IF N > 0 && M == NO:ASSI
		PRINTFORM %STR:102%
	ELSE
		;審神者
		IF NO:ASSI == 0
			PRINTFORM 
			CALL PNAME_55_MASTER
		ELSE
			PRINTFORM %CALLNAME:ASSI%
		ENDIF
	ENDIF
ELSE
	;審神者
	IF NO:MASTER == 0
		PRINTFORM 
		CALL PNAME_55_MASTER
	ELSE
		PRINTFORM %CALLNAME:MASTER%
	ENDIF
ENDIF


@PNAME_55_2
PRINTFORML 
PRINTFORML %CALLNAME%にどう呼んでもらうかを選択できます
PRINTFORML [0] 君
PRINTFORML [1] お前
PRINTFORML [2] 主
IF KANRAKU(TARGET)
	PRINTFORML [3] 主様
	PRINTFORML [4] ご主人様
	SIF !TALENT:MASTER:オトコ && !TALENT:MASTER:半陰半陽
		PRINTFORML [5] 女王様
ENDIF
PRINTFORML [6] %CALLNAME:MASTER%（呼び捨て）
$INPUT_LOOP
INPUT
IF RESULT == 0
	CSTR:55 = 君
	CFLAG:640 = 1
ELSEIF RESULT == 1
	CSTR:55 = お前
	CFLAG:640 = 2
ELSEIF RESULT == 2
	CSTR:55 = 主
	CFLAG:640 = 3
ELSEIF RESULT == 3 && KANRAKU(TARGET)
	CSTR:55 = 主様
	CFLAG:640 = 4
ELSEIF RESULT == 4 && KANRAKU(TARGET)
	CSTR:55 = ご主人様
	CFLAG:640 = 5
ELSEIF RESULT == 5 && KANRAKU(TARGET)
	CSTR:55 = 女王様
	CFLAG:640 = 6
ELSEIF RESULT == 6
	CSTR:55 = %CALLNAME:MASTER%
	CFLAG:640 = 0
ELSE
	GOTO INPUT_LOOP
ENDIF
PRINTFORML %CALLNAME%から%CALLNAME:MASTER%への呼び名を【%CSTR:55%】に決めました
PRINTFORML よろしいですか？
PRINTFORML [0] 【%CSTR:55%】で良い
PRINTFORML [1] もう一度考える
$INPUT_LOOP5
INPUT
IF RESULT == 0
ELSE
	RESTART
ENDIF

@PNAME_55_MASTER
IF CFLAG:640 == 1
	PRINTFORM 君
ELSEIF CFLAG:640 == 2
	PRINTFORM お前
ELSEIF CFLAG:640 == 3
	PRINTFORM 主
ELSEIF CFLAG:640 == 4
	PRINTFORM 主様
ELSEIF CFLAG:640 == 5
	PRINTFORM ご主人様
ELSEIF CFLAG:640 == 6
	PRINTFORM 女王様
ELSE
	PRINTFORM %CALLNAME:MASTER%
ENDIF

