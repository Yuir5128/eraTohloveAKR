@SOURCE_CHECK
;-------------------------------------------------
;残り時間の減少処理
;-------------------------------------------------
SELECTCASE SELECTCOM
	;軽拘束、薬、酒、移動系（야외플레이以外）、촉수소환/送還、촉수구욕は減らない。
	CASE 131 TO 134,300 TO 306,310,312,313,315,316,319,323,340,350
	;デート
	CASE 207
		TFLAG:74 -= 20
	;가구로한다、まったり、가사、노래연습、비디오감상、윤간
	CASE 150,203,204,205,311,322
		TFLAG:74 -= 5
	;セックス系は-3。抜かないフラグがある場合は-1
	CASE 100 TO 106,110 TO 116,181,260 TO 265,270,271,405,406,430,431,440,441,507 TO 515,517 TO 526
		IF TFLAG:60
			TFLAG:74 -= 1
		ELSE
			TFLAG:74 -= 3
		ENDIF
	;それ以外
	CASEELSE
		TFLAG:74 -= 1
ENDSELECT
;-------------------------------------------------
;ハードなコマンドでSUN値が削れる
;-------------------------------------------------
SELECTCASE SELECTCOM
	;拷問/낙인/한쪽팔절단/한쪽다리절단/발치
	CASE 151,156,390 TO 392
		;調教者に対して복종陥落、ドМ以外
		SIF !TALENT:복종 && !TALENT:예속 && TALENT:마조 != 2
			CFLAG:10 += 5
	;식분시킨다/식분한다
	CASE 185,286
		;식분경험30未満で마조でないか、ドМでない
		SIF (EXP:식분경험 < 30 && !TALENT:마조) || TALENT:마조 != 2
			CFLAG:10 += 3
	;촉수系
	CASE 340 TO 370
		;촉수경험５０未満かつ이상경험３以下かつ陥落していない
		SIF EXP:촉수경험 < 50 && EXP:이상경험 <= 3 && !KANRAKU2(TARGET)
			CFLAG:10 += 1
	;윤간
	CASE 322
		;음란복종陥落していない
		SIF KANRAKU2(TARGET) < 2
			CFLAG:10 += 5
ENDSELECT
;-------------------------------------------------
;コマンド実行時の뇨의上昇
;-------------------------------------------------
;そもそも뇨의がない場合は上がらないよ
IF BASE:뇨의 >= 60
	SELECTCASE SELECTCOM
		;Ｃ・Ｐ・Ｖ系コマンド
		CASE 20 TO 44,404
			BASE:뇨의 += 5
		;Ｕ系コマンド
		CASE 60 TO 61
			BASE:뇨의 += 30
		;衝撃を与えるコマンド（軽度）
		;스팽킹、젖스팽킹、촛불、가구로한다
		CASE 140,141,144,150
			BASE:뇨의 += 3
		;衝撃を与えるコマンド（重度）
		;Ａセックス系、채찍、바늘、삼각목마、拷問、목조르기、낙인
		CASE 110 TO 116,142,143,145,151,155,156,404
			BASE:뇨의 += 10
		;直接攻撃
		;발로 밟는다、배빵
		CASE 153,154
			BASE:뇨의 += 50
	ENDSELECT
ENDIF
;-------------------------------------------------
;コマンド実行時の변의上昇
;-------------------------------------------------
;そもそも변의がない場合は上がらないよ
IF BASE:변의 >= 60
	SELECTCASE SELECTCOM
		;Ａ系コマンド
		CASE 50 TO 56,404
			BASE:변의 += 5
		;衝撃を与えるコマンド（軽度）
		;스팽킹、젖스팽킹、촛불、가구로한다
		CASE 140,141,144,150
			BASE:변의 += 3
		;衝撃を与えるコマンド（重度）
		;Ａセックス系、채찍、바늘、삼각목마、拷問、목조르기、낙인
		CASE 110 TO 116,142,143,145,151,155,156,404
			BASE:변의 += 10
		;直接攻撃
		;발로 밟는다、배빵
		CASE 153,154
			BASE:변의 += 50
	ENDSELECT
ENDIF

;-------------------------------------------------
;コマンド実行時の구역질上昇
;-------------------------------------------------
;そもそも구역질がない場合は上がらないよ
IF BASE:구역질 >= 60
	SELECTCASE SELECTCOM
		;입を使うコマンド
		CASE 1,71,75,77,222,224,407,411,412,420,516
			BASE:구역질 += 5
		;セックス系、Ａセックス系
		CASE 100 TO 106,110 TO 116,260 TO 265,405,406,430,431,507 TO 515,517 TO 527
			BASE:구역질 += 10
		;衝撃を与えるコマンド（軽度）
		;스팽킹、젖스팽킹、촛불、가구로한다
		CASE 140,141,144,150
			BASE:구역질 += 5
		;衝撃を与えるコマンド（重度）
		;イマラチオ、채찍、바늘、삼각목마、拷問、목조르기、낙인
		CASE 72,110 TO 116,142,143,145,151,155,156,404
			BASE:구역질 += 10
		;直接攻撃
		;발로 밟는다、배빵
		CASE 153,154
			BASE:구역질 += 50
	ENDSELECT
ENDIF

;-------------------------------------------------
;바이브など付けっぱなしアイテムのチェック
;-------------------------------------------------
CALL EQUIP_CHECK
;-------------------------------------------------
;主人、同性、調教者の能力の処理
;-------------------------------------------------
CALL SOURCE_SEX_CHECK
CALL PLAYER_SKILL_CHECK

;-------------------------------------------------
;처녀喪失の処理
;-------------------------------------------------
CALL LOST_VIRGIN
;-------------------------------------------------
;동정喪失の処理
;-------------------------------------------------
CALL LOST_VIRGIN_DT
;-------------------------------------------------
;백버진喪失の処理
;-------------------------------------------------
CALL LOST_VIRGIN_BACK


;-------------------------------------------------
;依存度チェック
;-------------------------------------------------
CALL MASTER_DEPENDENCE_CHECK

;-------------------------------------------------
;기교のチェック
;-------------------------------------------------
CALL TECHNIQUE_CHECK

;-------------------------------------------------
;윤활で服を汚したかのチェック
;-------------------------------------------------
CALL JUNKATU_TYAKUI

;-------------------------------------------------
;뇨의・변의ゲージのチェック
;-------------------------------------------------
CALL DEFECATION_CHECK

;-------------------------------------------------
;구역질ゲージのチェック
;-------------------------------------------------
CALL NAUSEA_CHECK


;-------------------------------------------------
;【실의】チェック
;-------------------------------------------------
SIF TALENT:실의
	SOURCE:반발 += ((TALENT:실의 * 5) / 2)

;-------------------------------------------------
;쾌Cのソース
;-------------------------------------------------
;C민감とC둔감はここで処理
SIF TALENT:C둔감
	TIMES SOURCE:쾌C , 0.50
SIF TALENT:C민감
	TIMES SOURCE:쾌C , 1.50

;가려움증약使ってる場合、快感が跳ね上がる
SIF STAIN:4 & 1024 || STAIN:5 & 1024
	TIMES SOURCE:쾌C , 2.00

;C感覚
SIF ABL:C감각 == 0
	TIMES SOURCE:쾌C , 0.50
SIF ABL:C감각 == 1
	TIMES SOURCE:쾌C , 1.50
SIF ABL:C감각 == 2
	TIMES SOURCE:쾌C , 2.00
SIF ABL:C감각 == 3
	TIMES SOURCE:쾌C , 3.00
SIF ABL:C감각 == 4
	TIMES SOURCE:쾌C , 4.50
SIF ABL:C감각 == 5
	TIMES SOURCE:쾌C , 6.00
SIF ABL:C감각 == 6
	TIMES SOURCE:쾌C , 8.00
SIF ABL:C감각 == 7
	TIMES SOURCE:쾌C , 10.00
SIF ABL:C감각 == 8
	TIMES SOURCE:쾌C , 12.00
SIF ABL:C감각 == 9
	TIMES SOURCE:쾌C , 13.50
SIF ABL:C감각 >= 10
	TIMES SOURCE:쾌C , 15.00

LOCAL = SOURCE:쾌C

;PALAM:욕정をみる
SIF PALAM:욕정 < PALAMLV:1
	TIMES LOCAL , 0.80
SIF PALAM:욕정 < PALAMLV:2
	TIMES LOCAL , 1.00
SIF PALAM:욕정 < PALAMLV:3
	TIMES LOCAL , 1.20
SIF PALAM:욕정 < PALAMLV:4
	TIMES LOCAL , 1.50
SIF PALAM:욕정 >= PALAMLV:4
	TIMES LOCAL , 1.80

LOCAL:1 = SOURCE:쾌C

;ABL:욕망をみる
SIF ABL:욕망 == 0
	TIMES LOCAL:1 , 0.50
SIF ABL:욕망 == 1
	TIMES LOCAL:1 , 0.60
SIF ABL:욕망 == 2
	TIMES LOCAL:1 , 0.70
SIF ABL:욕망 == 3
	TIMES LOCAL:1 , 0.80
SIF ABL:욕망 == 4
	TIMES LOCAL:1 , 0.90
SIF ABL:욕망 == 5
	TIMES LOCAL:1 , 1.00
SIF ABL:욕망 == 6
	TIMES LOCAL:1 , 1.05
SIF ABL:욕망 == 7
	TIMES LOCAL:1 , 1.10
SIF ABL:욕망 == 8
	TIMES LOCAL:1 , 1.15
SIF ABL:욕망 == 9
	TIMES LOCAL:1 , 1.20
SIF ABL:욕망 >= 10
	TIMES LOCAL:1 , 1.40

UP:쾌C += LOCAL
UP:욕정 += LOCAL:1

;-------------------------------------------------
;쾌Vのソース
;-------------------------------------------------
;V민감とV둔감はここで処理
SIF TALENT:V둔감
	TIMES SOURCE:쾌V , 0.50
SIF TALENT:V민감
	TIMES SOURCE:쾌V , 1.50

;가려움증약使ってる場合、快感が跳ね上がる
SIF STAIN:6 & 1024 || STAIN:5 & 1024
	TIMES SOURCE:쾌V , 2.00

;V感覚
SIF ABL:V감각 == 0
	TIMES SOURCE:쾌V , 0.50
SIF ABL:V감각 == 1
	TIMES SOURCE:쾌V , 1.50
SIF ABL:V감각 == 2
	TIMES SOURCE:쾌V , 2.00
SIF ABL:V감각 == 3
	TIMES SOURCE:쾌V , 3.00
SIF ABL:V감각 == 4
	TIMES SOURCE:쾌V , 4.50
SIF ABL:V감각 == 5
	TIMES SOURCE:쾌V , 6.00
SIF ABL:V감각 == 6
	TIMES SOURCE:쾌V , 8.00
SIF ABL:V감각 == 7
	TIMES SOURCE:쾌V , 10.00
SIF ABL:V감각 == 8
	TIMES SOURCE:쾌V , 12.00
SIF ABL:V감각 == 9
	TIMES SOURCE:쾌V , 13.00
SIF ABL:V감각 >= 10
	TIMES SOURCE:쾌V , 15.00

;EXP:V경험をみる
SIF EXP:V경험 < EXPLV:1
	TIMES SOURCE:쾌V , 0.50
SIF EXP:V경험 < EXPLV:2
	TIMES SOURCE:쾌V , 0.60
SIF EXP:V경험 < EXPLV:3
	TIMES SOURCE:쾌V , 1.00
SIF EXP:V경험 < EXPLV:4
	TIMES SOURCE:쾌V , 1.20
SIF EXP:V경험 < EXPLV:5
	TIMES SOURCE:쾌V , 1.40
SIF EXP:V경험 >= EXPLV:5
	TIMES SOURCE:쾌V , 1.60

;PALAM:윤활をみる
SIF PALAM:윤활 < PALAMLV:1
	TIMES SOURCE:쾌V , 0.10
SIF PALAM:윤활 < PALAMLV:2
	TIMES SOURCE:쾌V , 0.40
SIF PALAM:윤활 < PALAMLV:3
	TIMES SOURCE:쾌V , 1.00
SIF PALAM:윤활 < PALAMLV:4
	TIMES SOURCE:쾌V , 1.40
SIF PALAM:윤활 >= PALAMLV:4
	TIMES SOURCE:쾌V , 1.80

LOCAL = SOURCE:쾌V

;PALAM:욕정をみる
SIF PALAM:욕정 < PALAMLV:1
	TIMES LOCAL , 0.60
SIF PALAM:욕정 < PALAMLV:2
	TIMES LOCAL , 0.80
SIF PALAM:욕정 < PALAMLV:3
	TIMES LOCAL , 1.00
SIF PALAM:욕정 < PALAMLV:4
	TIMES LOCAL , 1.50
SIF PALAM:욕정 >= PALAMLV:4
	TIMES LOCAL , 2.00

LOCAL:1 = SOURCE:쾌V

;ABL:욕망をみる
SIF ABL:욕망 == 0
	TIMES LOCAL:1 , 0.50
SIF ABL:욕망 == 1
	TIMES LOCAL:1 , 0.60
SIF ABL:욕망 == 2
	TIMES LOCAL:1 , 0.70
SIF ABL:욕망 == 3
	TIMES LOCAL:1 , 0.80
SIF ABL:욕망 == 4
	TIMES LOCAL:1 , 0.90
SIF ABL:욕망 == 5
	TIMES LOCAL:1 , 1.00
SIF ABL:욕망 == 6
	TIMES LOCAL:1 , 1.05
SIF ABL:욕망 == 7
	TIMES LOCAL:1 , 1.10
SIF ABL:욕망 == 8
	TIMES LOCAL:1 , 1.15
SIF ABL:욕망 == 9
	TIMES LOCAL:1 , 1.20
SIF ABL:욕망 >= 10
	TIMES LOCAL:1 , 1.40

;소인체형
IF TALENT:소인체형
	TIMES LOCAL , 0.80
	TIMES LOCAL:1 , 1.20
	UP:습득 += LOCAL:1/2
ENDIF

UP:쾌V += LOCAL
UP:욕정 += LOCAL:1
;-------------------------------------------------
;쾌Aのソース
;-------------------------------------------------
;A민감とA둔감はここで処理
SIF TALENT:A둔감
	TIMES SOURCE:쾌A , 0.50
SIF TALENT:A민감
	TIMES SOURCE:쾌A , 1.50

;가려움증약使ってる場合、快感が跳ね上がる
SIF STAIN:7 & 1024 || STAIN:8 & 1024
	TIMES SOURCE:쾌A , 2.00

;A感覚
SIF ABL:A감각 == 0
	TIMES SOURCE:쾌A , 0.50
SIF ABL:A감각 == 1
	TIMES SOURCE:쾌A , 1.50
SIF ABL:A감각 == 2
	TIMES SOURCE:쾌A , 2.00
SIF ABL:A감각 == 3
	TIMES SOURCE:쾌A , 3.00
SIF ABL:A감각 == 4
	TIMES SOURCE:쾌A , 4.50
SIF ABL:A감각 == 5
	TIMES SOURCE:쾌A , 6.00
SIF ABL:A감각 == 6
	TIMES SOURCE:쾌A , 8.00
SIF ABL:A감각 == 7
	TIMES SOURCE:쾌A , 10.00
SIF ABL:A감각 == 8
	TIMES SOURCE:쾌A , 12.00
SIF ABL:A감각 == 9
	TIMES SOURCE:쾌A , 13.50
SIF ABL:A감각 >= 10
	TIMES SOURCE:쾌A , 15.00

;EXP:A경험をみる
SIF EXP:A경험 < EXPLV:1
	TIMES SOURCE:쾌A , 0.10
SIF EXP:A경험 < EXPLV:2
	TIMES SOURCE:쾌A , 0.30
SIF EXP:A경험 < EXPLV:3
	TIMES SOURCE:쾌A , 0.50
SIF EXP:A경험 < EXPLV:4
	TIMES SOURCE:쾌A , 1.00
SIF EXP:A경험 < EXPLV:5
	TIMES SOURCE:쾌A , 1.40
SIF EXP:A경험 >= EXPLV:5
	TIMES SOURCE:쾌A , 1.60

;PALAM:윤활をみる
SIF PALAM:윤활 < PALAMLV:1
	TIMES SOURCE:쾌A , 0.10
SIF PALAM:윤활 < PALAMLV:2
	TIMES SOURCE:쾌A , 0.40
SIF PALAM:윤활 < PALAMLV:3
	TIMES SOURCE:쾌A , 1.00
SIF PALAM:윤활 < PALAMLV:4
	TIMES SOURCE:쾌A , 1.40
SIF PALAM:윤활 >= PALAMLV:4
	TIMES SOURCE:쾌A , 1.80

LOCAL = SOURCE:쾌A

;PALAM:욕정をみる
;쾌AはあまりPALAM:욕정では差が出ない
SIF PALAM:욕정 < PALAMLV:1
	TIMES LOCAL , 0.80
SIF PALAM:욕정 < PALAMLV:2
	TIMES LOCAL , 1.00
SIF PALAM:욕정 < PALAMLV:3
	TIMES LOCAL , 1.20
SIF PALAM:욕정 < PALAMLV:4
	TIMES LOCAL , 1.40
SIF PALAM:욕정 >= PALAMLV:4
	TIMES LOCAL , 1.60

LOCAL:1= SOURCE:쾌A

;ABL:욕망をみる
SIF ABL:욕망 == 0
	TIMES LOCAL:1, 0.50
SIF ABL:욕망 == 1
	TIMES LOCAL:1, 0.60
SIF ABL:욕망 == 2
	TIMES LOCAL:1, 0.70
SIF ABL:욕망 == 3
	TIMES LOCAL:1, 0.80
SIF ABL:욕망 == 4
	TIMES LOCAL:1, 0.90
SIF ABL:욕망 == 5
	TIMES LOCAL:1, 1.00
SIF ABL:욕망 == 6
	TIMES LOCAL:1, 1.05
SIF ABL:욕망 == 7
	TIMES LOCAL:1, 1.10
SIF ABL:욕망 == 8
	TIMES LOCAL:1, 1.15
SIF ABL:욕망 == 9
	TIMES LOCAL:1, 1.20
SIF ABL:욕망 >= 10
	TIMES LOCAL:1, 1.40

;소인체형
IF TALENT:소인체형
	TIMES LOCAL , 0.50
	TIMES LOCAL:1, 1.50
ENDIF

;快Aのソースが0以上で처녀で정조관념のとき、굴복のソースを三分の一にする
IF EXP:V경험 == 0 && TALENT:정조관념 && SOURCE:쾌A > 0
	SOURCE:굴복 /= 3
ENDIF

UP:쾌A += LOCAL
UP:욕정 += LOCAL:1
;-------------------------------------------------
;쾌Bのソース
;-------------------------------------------------
;B민감とB둔감はここで処理
SIF TALENT:B둔감
	TIMES SOURCE:쾌B , 0.50
SIF TALENT:B민감
	TIMES SOURCE:쾌B , 1.50

;함몰유두
IF TALENT:함몰유두
	;욕정のPLAMLV3以上
	IF PALAM:욕정 >= PALAMLV:3
		TIMES SOURCE:쾌B , 1.50
	ELSE
		TIMES SOURCE:쾌B , 0.50
	ENDIF
ENDIF

;가려움증약使ってる場合、快感が跳ね上がる
SIF STAIN:3 & 1024
	TIMES SOURCE:쾌B , 2.00

;B感覚
SIF ABL:B감각 == 0
	TIMES SOURCE:쾌B , 0.50
SIF ABL:B감각 == 1
	TIMES SOURCE:쾌B , 1.50
SIF ABL:B감각 == 2
	TIMES SOURCE:쾌B , 2.00
SIF ABL:B감각 == 3
	TIMES SOURCE:쾌B , 3.00
SIF ABL:B감각 == 4
	TIMES SOURCE:쾌B , 4.50
SIF ABL:B감각 == 5
	TIMES SOURCE:쾌B , 6.00
SIF ABL:B감각 == 6
	TIMES SOURCE:쾌B , 8.00
SIF ABL:B감각 == 7
	TIMES SOURCE:쾌B , 10.00
SIF ABL:B감각 == 8
	TIMES SOURCE:쾌B , 12.00
SIF ABL:B감각 == 9
	TIMES SOURCE:쾌B , 13.50
SIF ABL:B감각 >= 10
	TIMES SOURCE:쾌B , 15.00

LOCAL = SOURCE:쾌B

;PALAM:욕정をみる
SIF PALAM:욕정 < PALAMLV:1
	TIMES LOCAL , 0.80
SIF PALAM:욕정 < PALAMLV:2
	TIMES LOCAL , 1.00
SIF PALAM:욕정 < PALAMLV:3
	TIMES LOCAL , 1.20
SIF PALAM:욕정 < PALAMLV:4
	TIMES LOCAL , 1.50
SIF PALAM:욕정 >= PALAMLV:4
	TIMES LOCAL , 1.80

LOCAL:1= SOURCE:쾌B

;ABL:욕망をみる
SIF ABL:욕망 == 0
	TIMES LOCAL:1, 0.50
SIF ABL:욕망 == 1
	TIMES LOCAL:1, 0.60
SIF ABL:욕망 == 2
	TIMES LOCAL:1, 0.70
SIF ABL:욕망 == 3
	TIMES LOCAL:1, 0.80
SIF ABL:욕망 == 4
	TIMES LOCAL:1, 0.90
SIF ABL:욕망 == 5
	TIMES LOCAL:1, 1.00
SIF ABL:욕망 == 6
	TIMES LOCAL:1, 1.05
SIF ABL:욕망 == 7
	TIMES LOCAL:1, 1.10
SIF ABL:욕망 == 8
	TIMES LOCAL:1, 1.15
SIF ABL:욕망 == 9
	TIMES LOCAL:1, 1.20
SIF ABL:욕망 >= 10
	TIMES LOCAL:1, 1.40

;소인체형
IF TALENT:소인체형
	TIMES LOCAL , 1.50
	TIMES LOCAL:1, 1.20
	UP:윤활 += LOCAL:1/2
ENDIF

;B민감が無いかB감각３以下の時、Ｂでイキづらくなる
SIF (!TALENT:B민감 || ABL:B감각 <= 2) && PALAM:쾌B >= PALAMLV:4
	TIMES LOCAL , 0.30

UP:쾌B += LOCAL
UP:욕정 += LOCAL:1
;-------------------------------------------------
;同じコマンドの連続実行による上下の処理（快楽系）
;-------------------------------------------------
IF SELECTCOM == PREVCOM
	;UP:쾌C,UP:쾌V ,UP:쾌A,UP:쾌Bは絶頂に絡むので先に処理してある
	UP:쾌C /= 2
	UP:쾌V /= 2
	UP:쾌A /= 2
	UP:쾌B /= 2
ENDIF

;-------------------------------------------------
;기력０による上下の処理（快楽系）
;-------------------------------------------------
IF BASE:기력 <= 0
	;UP:쾌C,UP:쾌V ,UP:쾌A,UP:쾌Bは絶頂に絡むので先に処理してある
	UP:쾌C /= 2
	UP:쾌V /= 2
	UP:쾌A /= 2
	UP:쾌B /= 2
ENDIF

;-------------------------------------------------
;相性による上下の処理（快楽系）
;-------------------------------------------------
R = NO:PLAYER
SIF RELATION:R == 0
	LOCAL:2 = 100
;여자좋아、남자좋아、아이좋아
IF (TALENT:여자좋아 && MALE(PLAYER) == 0 && TALENT:PLAYER:소인체형 == 0) || (TALENT:남자좋아 && MALE(PLAYER) && TALENT:PLAYER:소인체형 == 0) || (TALENT:아이좋아 && TALENT:PLAYER:소인체형)
	IF RELATION:R == 0
		C = 150
	ELSE
		C = RELATION:R + 50
		SIF C > 200
			C = 200
	ENDIF
;남자혐오、여자혐오(연모陥落で無効)
ELSEIF (TALENT:남자혐오 && MALE(PLAYER) && (TALENT:연모 == 0 && TALENT:친애 == 0)) || (TALENT:여자혐오 && MALE(PLAYER) == 0 && (TALENT:연모 == 0 && TALENT:친애 == 0))
	IF RELATION:R == 0
		C = 50
	ELSE
		C = RELATION:R - 50
		SIF C <= 0
		C = 10
	ENDIF
ELSE
	C = RELATION:R
ENDIF
IF C != 0
	UP:쾌C *= C
	UP:쾌C /= 100
	UP:쾌V *= C
	UP:쾌V /= 100
	UP:쾌A *= C
	UP:쾌A /= 100
	UP:쾌B *= C
	UP:쾌B /= 100
ENDIF

;-------------------------------------------------
;쾌감을부정は、快ソースの数値に応じて、억울増加（음란、창부で無効）
;-------------------------------------------------
SIF TALENT:쾌감을부정 && !TALENT:음란 && !TALENT:창부
	SOURCE:울굴 += (UP:쾌C+UP:쾌V +UP:쾌A+UP:쾌B)/10

;-------------------------------------------------
;素質などによる上下の処理（快楽系）
;-------------------------------------------------
;미약
IF TEQUIP:미약
	TIMES UP:쾌C , 2.00
	TIMES UP:쾌V , 2.00
	TIMES UP:쾌A , 2.00
	TIMES UP:쾌B , 2.00
ENDIF

;가려움증약
IF ZUIKI(TARGET)
	TIMES UP:쾌C , 2.00
	TIMES UP:쾌V , 2.00
	TIMES UP:쾌A , 2.00
	TIMES UP:쾌B , 2.00
ENDIF

;이뇨제
IF TEQUIP:이뇨제
	TIMES UP:쾌C , 0.70
	TIMES UP:쾌V , 0.70
	TIMES UP:쾌A , 0.70
	TIMES UP:쾌B , 0.70
ENDIF

;꽐라플레이
IF TEQUIP:꽐라플레이
	;사케　もしくは　사케・맥주を飲んだ알콜쓰레기
	IF TFLAG:76 == 3 || (TALENT:알콜쓰레기 && TFLAG:76 != 1)
		TIMES UP:쾌C , 0.50
		TIMES UP:쾌V , 0.50
		TIMES UP:쾌A , 0.50
		TIMES UP:쾌B , 0.50
	;맥주
	ELSEIF TFLAG:76 == 2
		TIMES UP:쾌C , 0.70
		TIMES UP:쾌V , 0.70
		TIMES UP:쾌A , 0.70
		TIMES UP:쾌B , 0.70
	;감주
	ELSE
		;술꾼を持たない
		IF !TALENT:술꾼
			TIMES UP:쾌C , 0.90
			TIMES UP:쾌V , 0.90
			TIMES UP:쾌A , 0.90
			TIMES UP:쾌B , 0.90
		ENDIF
	ENDIF
ENDIF

;-------------------------------------------------
;陥落素質
;-------------------------------------------------
;음란
IF TALENT:음란
	TIMES UP:쾌C , 1.20
	TIMES UP:쾌V , 1.20
	TIMES UP:쾌A , 1.20
	TIMES UP:쾌B , 1.20
ENDIF

;창부
IF TALENT:창부
	TIMES UP:쾌C , 1.50
	TIMES UP:쾌V , 1.50
	TIMES UP:쾌A , 1.50
	TIMES UP:쾌B , 1.50
ENDIF

;-------------------------------------------------
;素質
;-------------------------------------------------
;자제심
IF TALENT:자제심
	TIMES UP:쾌C , 0.70
	TIMES UP:쾌V , 0.90
	TIMES UP:쾌A , 1.00
	TIMES UP:쾌B , 0.70
ENDIF

;즉각함락
IF TALENT:즉각함락
	TIMES UP:쾌C , 2.00
	TIMES UP:쾌V , 2.00
	TIMES UP:쾌A , 2.00
	TIMES UP:쾌B , 2.00
ENDIF
;자위광
SIF TALENT:자위광
	TIMES UP:쾌C , 1.20
;음란구멍
SIF TALENT:음란구멍
	TIMES UP:쾌V , 1.20
;항문광
SIF TALENT:항문광
	TIMES UP:쾌A , 1.20
;음란가슴
SIF TALENT:음란가슴
	TIMES UP:쾌B , 1.20
;섹스광
IF TALENT:섹스광 && (SEXPLAY(TARGET) || SELECTCOM == 430 || SELECTCOM == 431 || SELECTCOM == 405 || SELECTCOM == 406)
	TIMES UP:쾌C , 1.20
	TIMES UP:쾌V , 1.20
	TIMES UP:쾌A , 1.20
	TIMES UP:쾌B , 1.20
ENDIF
;포경
SIF TALENT:포경
	TIMES UP:쾌C , 0.90
;남자
IF TALENT:남자
	TIMES UP:쾌A , 1.30
ENDIF

;경험풍부
IF TALENT:경험풍부
	IF ABL:PLAYER:기교 > 8
		TIMES UP:쾌C , 1.20
		TIMES UP:쾌V , 1.20
		TIMES UP:쾌A , 1.20
		TIMES UP:쾌B , 1.20
	ELSEIF ABL:PLAYER:기교 < 3
		TIMES UP:쾌C , 0.20
		TIMES UP:쾌V , 0.20
		TIMES UP:쾌A , 0.20
		TIMES UP:쾌B , 0.20
	ELSEIF ABL:PLAYER:기교 < 5
		TIMES UP:쾌C , 0.50
		TIMES UP:쾌V , 0.50
		TIMES UP:쾌A , 0.50
		TIMES UP:쾌B , 0.50
	ENDIF
ENDIF

;-------------------------------------------------
;難易度による上下の処理（快楽系）
;-------------------------------------------------
;EASY
IF FLAG:4 == 1
	TIMES UP:쾌C , 1.60
	TIMES UP:쾌V , 1.60
	TIMES UP:쾌A , 1.60
	TIMES UP:쾌B , 1.60
;NORMAL
ELSEIF FLAG:4 == 2
	TIMES UP:쾌C , 1.20
	TIMES UP:쾌V , 1.20
	TIMES UP:쾌A , 1.20
	TIMES UP:쾌B , 1.20
;HARD
ELSEIF FLAG:4 == 3
	TIMES UP:쾌C , 0.80
	TIMES UP:쾌V , 0.80
	TIMES UP:쾌A , 0.80
	TIMES UP:쾌B , 0.80
ENDIF


;손가락삽입の慣らしギミック用処理、V経験が0の時は快Vは99で最大にする
;LOCAL = UP:쾌V + PALAM:쾌V
;IF LOCAL >= 100 && EXP:V경험 == 0
;	UP:쾌V = 0
;	PALAM:쾌V = 99
;ENDIF
;-------------------------------------------------
;愛液処理
;-------------------------------------------------
LOCAL = UP:쾌C + UP:쾌V + UP:쾌A + UP:쾌B
;쾌C＋쾌V＋쾌A＋쾌Bが合わせて100以上上昇ならその20%の액체のソースが加わる
IF LOCAL > 100
	;젖기쉬움と젖기어려움はここで処理
	SIF TALENT:젖기쉬움
		TIMES LOCAL , 3.00
	SIF TALENT:젖기어려움
		TIMES LOCAL , 0.40
	SOURCE:액체 += LOCAL / 5
ENDIF

;-------------------------------------------------
;강정신약による絶頂キャンセル
;-------------------------------------------------
SIF TEQUIP:강정신약 > 1
	CALL ECST_CANCEL

;-------------------------------------------------
;絶頂チェック
;-------------------------------------------------
CALL ORGASM_ADD_CHECK
;-------------------------------------------------
;奴隷に페니스がある場合のC절정＆사정チェック
;-------------------------------------------------
CALL TARGET_EJAC_CORGASM_CHECK

;-------------------------------------------------
;絶頂処理
;-------------------------------------------------
CALL ORGASM_ADD
;-------------------------------------------------
;調教対象の사정処理
;-------------------------------------------------
CALL TARGET_EJAC_CHECK

;-------------------------------------------------
;調教対象の사정チェック（噴乳）
;-------------------------------------------------
CALL TARGET_MILK_CHECK

;-------------------------------------------------
;애정のソース
;-------------------------------------------------
LOCAL = SOURCE:애정

;ABL:순종をみる
SIF ABL:순종 == 0
	TIMES LOCAL , 0.10
SIF ABL:순종 == 1
	TIMES LOCAL , 0.50
SIF ABL:순종 == 2
	TIMES LOCAL , 1.00
SIF ABL:순종 == 3
	TIMES LOCAL , 1.50
SIF ABL:순종 == 4
	TIMES LOCAL , 2.00
SIF ABL:순종 == 5
	TIMES LOCAL , 2.50
SIF ABL:순종 == 6
	TIMES LOCAL , 3.00
SIF ABL:순종 == 7
	TIMES LOCAL , 3.50
SIF ABL:순종 == 8
	TIMES LOCAL , 4.00
SIF ABL:순종 == 9
	TIMES LOCAL , 5.00
SIF ABL:순종 >= 10
	TIMES LOCAL , 6.00

LOCAL:1 = SOURCE:애정

;욕망を見る
SIF ABL:욕망 == 0
	TIMES LOCAL:1 , 0.00
SIF ABL:욕망 == 1
	TIMES LOCAL:1 , 0.40
SIF ABL:욕망 == 2
	TIMES LOCAL:1 , 0.80
SIF ABL:욕망 == 3
	TIMES LOCAL:1 , 1.20
SIF ABL:욕망 == 4
	TIMES LOCAL:1 , 1.60
SIF ABL:욕망 == 5
	TIMES LOCAL:1 , 2.00
SIF ABL:욕망 == 6
	TIMES LOCAL:1 , 2.40
SIF ABL:욕망 == 7
	TIMES LOCAL:1 , 2.80
SIF ABL:욕망 == 8
	TIMES LOCAL:1 , 3.20
SIF ABL:욕망 == 9
	TIMES LOCAL:1 , 3.60
SIF ABL:욕망 >= 10
	TIMES LOCAL:1 , 5.00

UP:순종 += LOCAL
UP:욕정 += LOCAL:1
;-------------------------------------------------
;성행동のソース
;-------------------------------------------------
LOCAL = SOURCE:성행동

;ABL:기교をみる
SIF ABL:기교 == 0
	TIMES LOCAL , 0.60
SIF ABL:기교 == 1
	TIMES LOCAL , 1.20
SIF ABL:기교 == 2
	TIMES LOCAL , 1.80
SIF ABL:기교 == 3
	TIMES LOCAL , 2.40
SIF ABL:기교 == 4
	TIMES LOCAL , 3.00
SIF ABL:기교 == 5
	TIMES LOCAL , 3.60
SIF ABL:기교 == 6
	TIMES LOCAL , 4.20
SIF ABL:기교 == 7
	TIMES LOCAL , 4.80
SIF ABL:기교 == 8
	TIMES LOCAL , 5.40
SIF ABL:기교 == 9
	TIMES LOCAL , 6.00
SIF ABL:기교 >= 10
	TIMES LOCAL , 7.00

;ABL:봉사정신をみる
SIF ABL:봉사정신 == 0
	TIMES LOCAL , 0.60
SIF ABL:봉사정신 == 1
	TIMES LOCAL , 0.80
SIF ABL:봉사정신 == 2
	TIMES LOCAL , 1.00
SIF ABL:봉사정신 == 3
	TIMES LOCAL , 1.20
SIF ABL:봉사정신 == 4
	TIMES LOCAL , 1.40
SIF ABL:봉사정신 == 5
	TIMES LOCAL , 1.70
SIF ABL:봉사정신 == 6
	TIMES LOCAL , 2.00
SIF ABL:봉사정신 == 7
	TIMES LOCAL , 2.40
SIF ABL:봉사정신 == 8
	TIMES LOCAL , 2.80
SIF ABL:봉사정신 == 9
	TIMES LOCAL , 4.00
SIF ABL:봉사정신 >= 10
	TIMES LOCAL , 5.00

UP:습득 += LOCAL
;-------------------------------------------------
;達成のソース
;-------------------------------------------------
LOCAL = SOURCE:성취감

;ABL:순종をみる
SIF ABL:순종 == 0
	TIMES LOCAL , 0.50
SIF ABL:순종 == 1
	TIMES LOCAL , 1.00
SIF ABL:순종 == 2
	TIMES LOCAL , 1.50
SIF ABL:순종 == 3
	TIMES LOCAL , 2.00
SIF ABL:순종 == 4
	TIMES LOCAL , 2.50
SIF ABL:순종 == 5
	TIMES LOCAL , 3.00
SIF ABL:순종 == 6
	TIMES LOCAL , 3.50
SIF ABL:순종 == 7
	TIMES LOCAL , 4.00
SIF ABL:순종 == 8
	TIMES LOCAL , 4.50
SIF ABL:순종 == 9
	TIMES LOCAL , 5.00
SIF ABL:순종 >= 10
	TIMES LOCAL , 6.00

;ABL:봉사정신をみる
SIF ABL:봉사정신 == 0
	TIMES LOCAL , 0.00
SIF ABL:봉사정신 == 1
	TIMES LOCAL , 0.50
SIF ABL:봉사정신 == 2
	TIMES LOCAL , 1.00
SIF ABL:봉사정신 == 3
	TIMES LOCAL , 1.50
SIF ABL:봉사정신 == 4
	TIMES LOCAL , 2.00
SIF ABL:봉사정신 == 5
	TIMES LOCAL , 2.50
SIF ABL:봉사정신 == 6
	TIMES LOCAL , 3.00
SIF ABL:봉사정신 == 7
	TIMES LOCAL , 3.50
SIF ABL:봉사정신 == 8
	TIMES LOCAL , 4.00
SIF ABL:봉사정신 == 9
	TIMES LOCAL , 4.50
SIF ABL:봉사정신 >= 10
	TIMES LOCAL , 6.00

UP:순종 += LOCAL
;-------------------------------------------------
;통증のソース
;-------------------------------------------------
LOCAL = SOURCE:통증
LOCAL:1 = SOURCE:통증
LOCAL:2 = SOURCE:통증/20

;마조끼
SIF ABL:마조끼 == 0
	TIMES LOCAL:1 , 0.00
SIF ABL:마조끼 == 1
	TIMES LOCAL:1 , 0.10
SIF ABL:마조끼 == 2
	TIMES LOCAL:1 , 0.20
SIF ABL:마조끼 == 3
	TIMES LOCAL:1 , 0.30
SIF ABL:마조끼 == 4
	TIMES LOCAL:1 , 0.45
SIF ABL:마조끼 == 5
	TIMES LOCAL:1 , 0.60
SIF ABL:마조끼 == 6
	TIMES LOCAL:1 , 0.75
SIF ABL:마조끼 == 7
	TIMES LOCAL:1 , 0.90
SIF ABL:마조끼 == 8
	TIMES LOCAL:1 , 1.20
SIF ABL:마조끼 == 9
	TIMES LOCAL:1 , 1.50
SIF ABL:마조끼 >= 10
	TIMES LOCAL:1 , 3.00

;소인체형
IF TALENT:소인체형
	TIMES LOCAL , 2.00
	TIMES LOCAL:1 , 0.75
ENDIF

;調教者が【새드、ドＳ】
SELECTCASE TALENT:PLAYER:새드
	CASE 1
		TIMES LOCAL:1 , 1.50
	CASE 2
		TIMES LOCAL:1 , 2.50
ENDSELECT

;겁쟁이
SIF TALENT:겁쟁이
	TIMES LOCAL:2 , 2.00

;마조끼があるとPALAM:욕정も上がる
;そのとき調教者が【새드】だと効果的
;고통に応じて공포のソースが増加する
UP:고통 += LOCAL
UP:욕정 += LOCAL:1
UP:공포 += LOCAL:2
;-------------------------------------------------
;두려움のソース
;-------------------------------------------------
LOCAL = SOURCE:두려움

;ABL:순종をみる（공포よりは畏怖に近いと解釈）
SIF ABL:순종 == 0
	TIMES LOCAL , 1.00
SIF ABL:순종 == 1
	TIMES LOCAL , 1.50
SIF ABL:순종 == 2
	TIMES LOCAL , 2.00
SIF ABL:순종 == 3
	TIMES LOCAL , 2.50
SIF ABL:순종 == 4
	TIMES LOCAL , 3.00
SIF ABL:순종 == 5
	TIMES LOCAL , 3.50
SIF ABL:순종 == 6
	TIMES LOCAL , 4.00
SIF ABL:순종 == 7
	TIMES LOCAL , 4.50
SIF ABL:순종 == 8
	TIMES LOCAL , 5.00
SIF ABL:순종 == 9
	TIMES LOCAL , 5.50
SIF ABL:순종 >= 10
	TIMES LOCAL , 7.00

;調教者が[위압](붕괴か감정부족場合は無効)
SIF TALENT:PLAYER:위압 && !TALENT:붕괴 && !TALENT:감정부족
	TIMES LOCAL, 1.50

UP:공포 += LOCAL
;-------------------------------------------------
;중독충족のソース
;-------------------------------------------------
LOCAL = SOURCE:중독충족
LOCAL:1 = SOURCE:중독충족

;욕망
IF ABL:욕망 == 0
	TIMES LOCAL , 0.40
	TIMES LOCAL:1 , 0.50
ELSEIF ABL:욕망 == 1
	TIMES LOCAL , 0.60
	TIMES LOCAL:1 , 0.70
ELSEIF ABL:욕망 == 2
	TIMES LOCAL , 0.80
	TIMES LOCAL:1 , 0.90
ELSEIF ABL:욕망 == 3
	TIMES LOCAL , 1.00
	TIMES LOCAL:1 , 1.10
ELSEIF ABL:욕망 == 4
	TIMES LOCAL , 1.20
	TIMES LOCAL:1 , 1.30
ELSEIF ABL:욕망 == 5
	TIMES LOCAL , 1.40
	TIMES LOCAL:1 , 1.50
ELSEIF ABL:욕망 == 6
	TIMES LOCAL , 1.60
	TIMES LOCAL:1 , 1.70
ELSEIF ABL:욕망 == 7
	TIMES LOCAL , 1.80
	TIMES LOCAL:1 , 1.90
ELSEIF ABL:욕망 == 8
	TIMES LOCAL , 2.00
	TIMES LOCAL:1 , 2.10
ELSEIF ABL:욕망 == 9
	TIMES LOCAL , 2.20
	TIMES LOCAL:1 , 2.30
ELSEIF ABL:욕망 >= 10
	TIMES LOCAL , 2.50
	TIMES LOCAL:1 , 2.70
ENDIF

UP:순종 += LOCAL
UP:욕정 += LOCAL:1
;-------------------------------------------------
;액체のソース
;-------------------------------------------------
LOCAL = SOURCE:액체
SIF VAGINA(TARGET)
	LOCAL = LOCAL / 2
;소인체형
IF TALENT:소인체형 && TALENT:PLAYER:소인체형 == 0
	SIF SELECTCOM != 60 && SELECTCOM != 300
		TIMES LOCAL , 0.40
ENDIF

UP:윤활 += LOCAL
;-------------------------------------------------
;욕정のソース
;-------------------------------------------------
LOCAL = SOURCE:욕정

;욕망を見る
SIF ABL:욕망 == 0
	TIMES LOCAL , 0.00
SIF ABL:욕망 == 1
	TIMES LOCAL , 0.40
SIF ABL:욕망 == 2
	TIMES LOCAL , 0.80
SIF ABL:욕망 == 3
	TIMES LOCAL , 1.20
SIF ABL:욕망 == 4
	TIMES LOCAL , 1.60
SIF ABL:욕망 == 5
	TIMES LOCAL , 2.00
SIF ABL:욕망 == 6
	TIMES LOCAL , 2.40
SIF ABL:욕망 == 7
	TIMES LOCAL , 2.80
SIF ABL:욕망 == 8
	TIMES LOCAL , 3.20
SIF ABL:욕망 == 9
	TIMES LOCAL , 3.60
SIF ABL:욕망 >= 10
	TIMES LOCAL , 5.00

UP:욕정 += LOCAL
;-------------------------------------------------
;순종のソース
;-------------------------------------------------
LOCAL = SOURCE:순종

;ABL:순종をみる
SIF ABL:순종 == 0
	TIMES LOCAL , 0.50
SIF ABL:순종 == 1
	TIMES LOCAL , 0.80
SIF ABL:순종 == 2
	TIMES LOCAL , 1.00
SIF ABL:순종 == 3
	TIMES LOCAL , 1.20
SIF ABL:순종 == 4
	TIMES LOCAL , 1.40
SIF ABL:순종 == 5
	TIMES LOCAL , 1.60
SIF ABL:순종 == 6
	TIMES LOCAL , 1.80
SIF ABL:순종 == 7
	TIMES LOCAL , 2.00
SIF ABL:순종 == 8
	TIMES LOCAL , 2.40
SIF ABL:순종 == 9
	TIMES LOCAL , 3.00
SIF ABL:순종 >= 10
	TIMES LOCAL , 5.00

UP:순종 += LOCAL
;-------------------------------------------------
;노출のソース
;-------------------------------------------------
;부끄럼쟁이と수치심없음はここで処理
SIF TALENT:부끄럼쟁이
	TIMES SOURCE:노출 , 2.00
SIF TALENT:수치심없음
	TIMES SOURCE:노출 , 0.50

;윤활アップの50％を노출のソースに加える
;ただし액체追加のソースのぶんは引く
SOURCE:노출 += (UP:윤활-SOURCE:액체) / 2
SIF SOURCE:노출 < 0
	SOURCE:노출 = 0
LOCAL = SOURCE:노출

;ABL:노출벽をみる
SIF ABL:노출벽 == 0
	TIMES LOCAL , 0.00
SIF ABL:노출벽 == 1
	TIMES LOCAL , 0.10
SIF ABL:노출벽 == 2
	TIMES LOCAL , 0.20
SIF ABL:노출벽 == 3
	TIMES LOCAL , 0.40
SIF ABL:노출벽 == 4
	TIMES LOCAL , 0.60
SIF ABL:노출벽 == 5
	TIMES LOCAL , 0.80
SIF ABL:노출벽 == 6
	TIMES LOCAL , 1.00
SIF ABL:노출벽 == 7
	TIMES LOCAL , 1.20
SIF ABL:노출벽 == 8
	TIMES LOCAL , 1.40
SIF ABL:노출벽 == 9
	TIMES LOCAL , 1.60
SIF ABL:노출벽 >= 10
	TIMES LOCAL , 2.00

LOCAL:1 = SOURCE:노출

;PALAM:수치をみる
;恥ずかしさを感じれば感じるほどあまり恥ずかしくなくなる
IF PALAM:수치 < PALAMLV:1
	TIMES LOCAL:1 , 1.00
ELSEIF PALAM:수치 < PALAMLV:2
	TIMES LOCAL:1 , 0.90
ELSEIF PALAM:수치 < PALAMLV:3
	TIMES LOCAL:1 , 0.80
ELSEIF PALAM:수치 < PALAMLV:4
	TIMES LOCAL:1 , 0.70
ELSEIF PALAM:수치 >= PALAMLV:4
	TIMES LOCAL:1 , 0.60
ENDIF


UP:욕정 += LOCAL
UP:수치 += LOCAL:1


;-------------------------------------------------
;굴복のソース
;-------------------------------------------------
LOCAL = SOURCE:굴복

;ABL:순종をみる
SIF ABL:순종 == 0
	TIMES LOCAL , 0.50
SIF ABL:순종 == 1
	TIMES LOCAL , 1.00
SIF ABL:순종 == 2
	TIMES LOCAL , 1.50
SIF ABL:순종 == 3
	TIMES LOCAL , 2.00
SIF ABL:순종 == 4
	TIMES LOCAL , 2.50
SIF ABL:순종 == 5
	TIMES LOCAL , 3.00
SIF ABL:순종 == 6
	TIMES LOCAL , 3.50
SIF ABL:순종 == 7
	TIMES LOCAL , 4.00
SIF ABL:순종 == 8
	TIMES LOCAL , 4.50
SIF ABL:순종 == 9
	TIMES LOCAL , 5.00
SIF ABL:순종 >= 10
	TIMES LOCAL , 6.00

;ABL:봉사정신をみる
SIF ABL:봉사정신 == 0
	TIMES LOCAL , 1.00
SIF ABL:봉사정신 == 1
	TIMES LOCAL , 1.50
SIF ABL:봉사정신 == 2
	TIMES LOCAL , 2.00
SIF ABL:봉사정신 == 3
	TIMES LOCAL , 2.50
SIF ABL:봉사정신 == 4
	TIMES LOCAL , 3.00
SIF ABL:봉사정신 == 5
	TIMES LOCAL , 3.50
SIF ABL:봉사정신 == 6
	TIMES LOCAL , 4.00
SIF ABL:봉사정신 == 7
	TIMES LOCAL , 4.50
SIF ABL:봉사정신 == 8
	TIMES LOCAL , 5.00
SIF ABL:봉사정신 == 9
	TIMES LOCAL , 5.50
SIF ABL:봉사정신 >= 10
	TIMES LOCAL , 7.00

UP:굴복 += LOCAL

;-------------------------------------------------
;불결のソース
;-------------------------------------------------
LOCAL = SOURCE:불결

;ABL:순종をみる
SIF ABL:순종 == 0
	TIMES LOCAL , 1.00
SIF ABL:순종 == 1
	TIMES LOCAL , 0.90
SIF ABL:순종 == 2
	TIMES LOCAL , 0.80
SIF ABL:순종 == 3
	TIMES LOCAL , 0.70
SIF ABL:순종 == 4
	TIMES LOCAL , 0.60
SIF ABL:순종 == 5
	TIMES LOCAL , 0.50
SIF ABL:순종 == 6
	TIMES LOCAL , 0.40
SIF ABL:순종 == 7
	TIMES LOCAL , 0.30
SIF ABL:순종 == 8
	TIMES LOCAL , 0.20
SIF ABL:순종 == 9
	TIMES LOCAL , 0.10
SIF ABL:순종 >= 10
	TIMES LOCAL , 0.00

UP:불쾌 += LOCAL

;-------------------------------------------------
;울굴のソース
;-------------------------------------------------
LOCAL = SOURCE:울굴

;ABL:순종をみる
SIF ABL:순종 == 0
	TIMES LOCAL , 1.00
SIF ABL:순종 == 1
	TIMES LOCAL , 0.80
SIF ABL:순종 == 2
	TIMES LOCAL , 0.60
SIF ABL:순종 == 3
	TIMES LOCAL , 0.40
SIF ABL:순종 == 4
	TIMES LOCAL , 0.30
SIF ABL:순종 == 5
	TIMES LOCAL , 0.20
SIF ABL:순종 == 6
	TIMES LOCAL , 0.10
SIF ABL:순종 == 7
	TIMES LOCAL , 0.08
SIF ABL:순종 == 8
	TIMES LOCAL , 0.06
SIF ABL:순종 == 9
	TIMES LOCAL , 0.04
SIF ABL:순종 >= 10
	TIMES LOCAL , 0.00

;ABL:욕망をみる
SIF ABL:욕망 == 0
	TIMES LOCAL , 1.00
SIF ABL:욕망 == 1
	TIMES LOCAL , 0.90
SIF ABL:욕망 == 2
	TIMES LOCAL , 0.80
SIF ABL:욕망 == 3
	TIMES LOCAL , 0.70
SIF ABL:욕망 == 4
	TIMES LOCAL , 0.60
SIF ABL:욕망 == 5
	TIMES LOCAL , 0.50
SIF ABL:욕망 == 6
	TIMES LOCAL , 0.40
SIF ABL:욕망 == 7
	TIMES LOCAL , 0.30
SIF ABL:욕망 == 8
	TIMES LOCAL , 0.20
SIF ABL:욕망 == 9
	TIMES LOCAL , 0.10
SIF ABL:욕망 >= 10
	TIMES LOCAL , 0.00

UP:억울 += LOCAL

;-------------------------------------------------
;일탈のソース
;-------------------------------------------------
;호기심と보수적はここで処理
SIF TALENT:호기심
	TIMES SOURCE:일탈 , 0.80
SIF TALENT:보수적
	TIMES SOURCE:일탈 , 2.00

LOCAL = SOURCE:일탈

;ABL:순종をみる
SIF ABL:순종 == 0
	TIMES LOCAL , 1.00
SIF ABL:순종 == 1
	TIMES LOCAL , 0.80
SIF ABL:순종 == 2
	TIMES LOCAL , 0.60
SIF ABL:순종 == 3
	TIMES LOCAL , 0.40
SIF ABL:순종 == 4
	TIMES LOCAL , 0.30
SIF ABL:순종 == 5
	TIMES LOCAL , 0.20
SIF ABL:순종 == 6
	TIMES LOCAL , 0.10
SIF ABL:순종 == 7
	TIMES LOCAL , 0.08
SIF ABL:순종 == 8
	TIMES LOCAL , 0.06
SIF ABL:순종 == 9
	TIMES LOCAL , 0.04
SIF ABL:순종 >= 10
	TIMES LOCAL , 0.00

;ABL:마조끼をみる
SIF ABL:마조끼 == 0
	TIMES LOCAL , 1.00
SIF ABL:마조끼 == 1
	TIMES LOCAL , 0.90
SIF ABL:마조끼 == 2
	TIMES LOCAL , 0.80
SIF ABL:마조끼 == 3
	TIMES LOCAL , 0.70
SIF ABL:마조끼 == 4
	TIMES LOCAL , 0.60
SIF ABL:마조끼 == 5
	TIMES LOCAL , 0.50
SIF ABL:마조끼 == 6
	TIMES LOCAL , 0.40
SIF ABL:마조끼 == 7
	TIMES LOCAL , 0.30
SIF ABL:마조끼 == 8
	TIMES LOCAL , 0.20
SIF ABL:마조끼 == 9
	TIMES LOCAL , 0.10
SIF ABL:마조끼 >= 10
	TIMES LOCAL , 0.00

UP:반감 += LOCAL

;-------------------------------------------------
;반감のソース
;-------------------------------------------------
LOCAL = SOURCE:반발

;ABL:순종をみる
SIF ABL:순종 == 0
	TIMES LOCAL , 1.00
SIF ABL:순종 == 1
	TIMES LOCAL , 0.80
SIF ABL:순종 == 2
	TIMES LOCAL , 0.60
SIF ABL:순종 == 3
	TIMES LOCAL , 0.40
SIF ABL:순종 == 4
	TIMES LOCAL , 0.30
SIF ABL:순종 == 5
	TIMES LOCAL , 0.20
SIF ABL:순종 == 6
	TIMES LOCAL , 0.10
SIF ABL:순종 == 7
	TIMES LOCAL , 0.08
SIF ABL:순종 == 8
	TIMES LOCAL , 0.06
SIF ABL:순종 == 9
	TIMES LOCAL , 0.04
SIF ABL:순종 >= 10
	TIMES LOCAL , 0.00

;ABL:봉사정신をみる
SIF ABL:봉사정신 == 0
	TIMES LOCAL , 1.00
SIF ABL:봉사정신 == 1
	TIMES LOCAL , 0.90
SIF ABL:봉사정신 == 2
	TIMES LOCAL , 0.80
SIF ABL:봉사정신 == 3
	TIMES LOCAL , 0.70
SIF ABL:봉사정신 == 4
	TIMES LOCAL , 0.60
SIF ABL:봉사정신 == 5
	TIMES LOCAL , 0.50
SIF ABL:봉사정신 == 6
	TIMES LOCAL , 0.40
SIF ABL:봉사정신 == 7
	TIMES LOCAL , 0.30
SIF ABL:봉사정신 == 8
	TIMES LOCAL , 0.20
SIF ABL:봉사정신 == 9
	TIMES LOCAL , 0.10
SIF ABL:봉사정신 >= 10
	TIMES LOCAL , 0.00

;ABL:마조끼をみる
SIF ABL:마조끼 == 0
	TIMES LOCAL , 1.00
SIF ABL:마조끼 == 1
	TIMES LOCAL , 0.90
SIF ABL:마조끼 == 2
	TIMES LOCAL , 0.80
SIF ABL:마조끼 == 3
	TIMES LOCAL , 0.70
SIF ABL:마조끼 == 4
	TIMES LOCAL , 0.60
SIF ABL:마조끼 == 5
	TIMES LOCAL , 0.50
SIF ABL:마조끼 == 6
	TIMES LOCAL , 0.40
SIF ABL:마조끼 == 7
	TIMES LOCAL , 0.30
SIF ABL:마조끼 == 8
	TIMES LOCAL , 0.20
SIF ABL:마조끼 == 9
	TIMES LOCAL , 0.10
SIF ABL:마조끼 >= 10
	TIMES LOCAL , 0.00

UP:반감 += LOCAL

;-------------------------------------------------
;素質などによる上下の処理
;-------------------------------------------------
;-------------------------------------------------
;装備系（薬等）
;-------------------------------------------------
;미약
IF TEQUIP:미약
	TIMES UP:순종 , 1.20
	TIMES UP:욕정 , 2.00
	TIMES UP:굴복 , 1.20
	TIMES UP:불쾌 , 0.75
ENDIF

;가려움증약
IF ZUIKI(TARGET)
	TIMES UP:순종 , 1.20
	TIMES UP:욕정 , 2.00
	TIMES UP:굴복 , 1.20
	TIMES UP:불쾌 , 0.75
ENDIF

;이뇨제
IF TEQUIP:이뇨제
	TIMES UP:순종 , 0.80
	TIMES UP:욕정 , 0.80
	TIMES UP:수치 , 1.20
	TIMES UP:반감 , 1.50
	TIMES UP:불쾌 , 1.20
ENDIF

;꽐라플레이
IF TEQUIP:꽐라플레이
	;사케　もしくは　사케・맥주を飲んだ알콜쓰레기
	IF TFLAG:76 == 3 || (TALENT:알콜쓰레기 && TFLAG:76 != 1)
		TIMES UP:굴복 , 0.50
		TIMES UP:습득 , 0.50
		TIMES UP:불쾌 , 0.50
	;맥주
	ELSEIF TFLAG:76 == 2
		TIMES UP:굴복 , 0.70
		TIMES UP:습득 , 0.70
		TIMES UP:불쾌 , 0.70
	;감주
	ELSE
		;술꾼を持たない
		IF !TALENT:술꾼
			TIMES UP:굴복 , 0.90
			TIMES UP:습득 , 0.90
			TIMES UP:불쾌 , 0.90
		ENDIF
	ENDIF
ENDIF

;-------------------------------------------------
;陥落素質
;-------------------------------------------------
;연모
IF TALENT:연모 && ASSIPLAY == 0
	TIMES UP:순종 , 1.50
	TIMES UP:굴복 , 2.00
	TIMES UP:반감 , 0.50
	TIMES UP:불쾌 , 0.50
ELSEIF TALENT:연모 && ASSIPLAY > 0
	TIMES UP:순종 , 0.80
	TIMES UP:반감 , 1.20
	TIMES UP:불쾌 , 1.20
ENDIF

;음란
IF TALENT:음란
	TIMES UP:순종 , 1.20
	TIMES UP:굴복 , 1.20
	TIMES UP:반감 , 0.80
	TIMES UP:불쾌 , 0.80
	TIMES UP:억울 , 0.40
ENDIF

;복종
IF TALENT:복종
	TIMES UP:순종 , 0.50
	TIMES UP:굴복 , 2.00
	TIMES UP:공포 , 1.50
	TIMES UP:반감 , 0.50
ENDIF

;친애
IF TALENT:친애 && ASSIPLAY == 0
	TIMES UP:순종 , 2.00
	TIMES UP:굴복 , 3.00
	TIMES UP:반감 , 0.20
	TIMES UP:불쾌 , 0.20
	TIMES UP:억울 , 0.50
ELSEIF TALENT:친애 && ASSIPLAY > 0
	TIMES UP:순종 , 0.80
	TIMES UP:반감 , 1.20
	TIMES UP:불쾌 , 1.20
ENDIF

;창부
IF TALENT:창부
	TIMES UP:순종 , 1.50
	TIMES UP:굴복 , 1.50
	TIMES UP:반감 , 0.60
	TIMES UP:불쾌 , 0.60
	TIMES UP:억울 , 0.30
ENDIF

;예속
IF TALENT:예속
	TIMES UP:순종 , 0.20
	TIMES UP:굴복 , 2.50
	TIMES UP:공포 , 3.00
	TIMES UP:반감 , 0.25
	TIMES UP:불쾌 , 0.25
	TIMES UP:억울 , 0.25
ENDIF

;-------------------------------------------------
;素質
;-------------------------------------------------
;겁쟁이
IF TALENT:겁쟁이
	TIMES UP:공포 , 1.20
	TIMES UP:반감 , 1.20
ENDIF

;반항적（복종、예속で無効）
IF TALENT:반항적 && (TALENT:복종 == 0 && TALENT:예속 == 0)
	TIMES UP:순종 , 0.80
	TIMES UP:굴복 , 0.80
	TIMES UP:반감 , 1.20
ENDIF
;꿋꿋함
IF TALENT:꿋꿋함
	TIMES UP:순종 , 0.80
	TIMES UP:욕정 , 0.80
	TIMES UP:굴복 , 0.80
	TIMES UP:공포 , 0.80
	TIMES UP:반감 , 1.20
	TIMES UP:억울 , 1.20
ENDIF
;솔직함
IF TALENT:솔직함
	TIMES UP:순종 , 1.20
	TIMES UP:반감 , 0.80
ENDIF
;얌전함
IF TALENT:얌전함
	TIMES UP:순종 , 0.80
	TIMES UP:반감 , 0.80
ENDIF
;프라이드높음
IF TALENT:프라이드높음
	TIMES UP:굴복 , 0.80
	TIMES UP:공포 , 0.80
	TIMES UP:반감 , 1.20
ENDIF
;건방짐
IF TALENT:건방짐
	TIMES UP:순종 , 0.80
	TIMES UP:굴복 , 0.80
	TIMES UP:반감 , 1.20
ENDIF
;프라이드낮음
IF TALENT:프라이드낮음
	TIMES UP:굴복 , 1.20
	TIMES UP:공포 , 1.20
	TIMES UP:반감 , 0.80
ENDIF
;츤데레
IF TALENT:츤데레
	;陥落素質がある場合と無い場合で変化する
	IF TALENT:연모 || TALENT:음란 || TALENT:복종 || TALENT:친애 || TALENT:창부 || TALENT:예속
		TIMES UP:순종 , 1.20
		TIMES UP:굴복 , 1.20
		TIMES UP:반감 , 0.80
	ELSE
		TIMES UP:순종 , 0.80
		TIMES UP:굴복 , 0.80
		TIMES UP:반감 , 1.20
	ENDIF
ENDIF

;위압(陥落していれば無効)
IF TALENT:위압 && !TALENT:연모 && !TALENT:친애 && !TALENT:음란 && !TALENT:창부 && !TALENT:복종 && !TALENT:예속
	TIMES UP:굴복 , 0.80
	TIMES UP:공포 , 0.80
	TIMES UP:반감 , 1.20
ENDIF

;자제심
IF TALENT:자제심
	TIMES UP:굴복 , 0.80
	TIMES UP:공포 , 0.80
	TIMES UP:반감 , 1.20
ENDIF
;무관심
IF TALENT:무관심
	TIMES UP:순종 , 0.80
	TIMES UP:욕정 , 0.80
	TIMES UP:굴복 , 0.80
	TIMES UP:공포 , 0.80
	TIMES UP:반감 , 0.80
ENDIF
;감정부족
IF TALENT:감정부족
	TIMES UP:순종 , 0.80
	TIMES UP:욕정 , 0.80
	TIMES UP:굴복 , 0.80
	TIMES UP:수치 , 0.80
	TIMES UP:공포 , 0.80
	TIMES UP:반감 , 0.80
	TIMES UP:불쾌 , 0.80
	TIMES UP:억울 , 0.80
ENDIF
;호기심
SIF TALENT:호기심
	TIMES UP:습득 , 1.20
;보수적
SIF TALENT:보수적
	TIMES UP:습득 , 0.80
;낙관적
SIF TALENT:낙관적
	TIMES UP:억울 , 0.80
;비관적
SIF TALENT:비관적
	TIMES UP:억울 , 1.20
;눈에띄고싶음
SIF TALENT:눈에띄고싶음
	TIMES UP:순종 , 1.20

;억압
IF TALENT:억압
	TIMES UP:욕정 , 0.80
	TIMES UP:반감 , 1.20
	TIMES UP:억울 , 1.20
ENDIF
;해방
IF TALENT:해방
	TIMES UP:욕정 , 1.20
	TIMES UP:굴복 , 1.20
ENDIF
;저항
IF TALENT:저항
	TIMES UP:순종 , 0.80
	TIMES UP:반감 , 1.20
	TIMES UP:억울 , 1.20
ENDIF

;고통에강함
SIF TALENT:고통에강함
	TIMES UP:고통 , 1.20
;고통에약함
SIF TALENT:고통에약함
	TIMES UP:고통 , 0.80

;습득빠름
SIF TALENT:습득빠름
	TIMES UP:습득 , 1.20
;습득느림
SIF TALENT:습득느림
	TIMES UP:습득 , 0.80

;헌신적
SIF TALENT:헌신적
	TIMES UP:굴복 , 1.20

;쾌감에솔직
SIF TALENT:쾌감에솔직
	TIMES UP:욕정 , 1.20
;쾌감을부정（음란、창부で無効）
SIF TALENT:쾌감을부정 && (TALENT:음란 == 0 && TALENT:창부 == 0)
	TIMES UP:욕정 , 0.80
;즉각함락
IF TALENT:즉각함락
	TIMES UP:순종 , 2.00
	TIMES UP:욕정 , 2.00
	TIMES UP:굴복 , 2.00
	TIMES UP:습득 , 2.00
	TIMES UP:수치 , 2.00
	TIMES UP:공포 , 2.00
	TIMES UP:반감 , 0.50
	TIMES UP:불쾌 , 0.50
	TIMES UP:억울 , 0.50
ENDIF
;자위광
SIF TALENT:자위광
	TIMES UP:욕정 , 1.20
;음란구멍
SIF TALENT:음란구멍
	TIMES UP:순종 , 1.20
;항문광
SIF TALENT:항문광
	TIMES UP:굴복 , 1.20
;음란가슴
SIF TALENT:음란가슴
	TIMES UP:수치 , 1.20
;섹스광
IF TALENT:섹스광 && (SEXPLAY(TARGET) || SELECTCOM == 430 || SELECTCOM == 431 || SELECTCOM == 405 || SELECTCOM == 406)
	TIMES UP:순종 , 1.20
	TIMES UP:욕정 , 1.20
	TIMES UP:굴복 , 1.20
	TIMES UP:수치 , 1.20
ENDIF

;도착적
IF TALENT:도착적
	TIMES UP:굴복 , 1.20
	TIMES UP:수치 , 1.20
ENDIF

;새드、ドＳ
SELECTCASE TALENT:새드
	CASE 1
		TIMES UP:굴복 , 0.90
		TIMES UP:공포 , 0.90
	CASE 2
		TIMES UP:굴복 , 0.80
		TIMES UP:공포 , 0.80
ENDSELECT

;마조、ドМ
SELECTCASE TALENT:마조
	CASE 1
		TIMES UP:굴복 , 1.10
		TIMES UP:공포 , 1.10
		TIMES UP:억울 , 0.90
	CASE 2
		TIMES UP:굴복 , 1.20
		TIMES UP:공포 , 1.20
		TIMES UP:억울 , 0.80
ENDSELECT

;맹신
IF TALENT:맹신
	TIMES UP:굴복 , 1.20
	TIMES UP:반감 , 0.80
ENDIF

;포경
SIF TALENT:포경
	TIMES UP:불쾌 , 1.20
	
;경험풍부
IF TALENT:경험풍부
	IF ABL:PLAYER:기교 > 8
		TIMES UP:수치 , 1.20
		TIMES UP:공포 , 1.20
		TIMES UP:반감 , 1.20
		TIMES UP:억울 , 1.20
	ELSEIF ABL:PLAYER:기교 < 3
		TIMES UP:수치 , 0.20
		TIMES UP:공포 , 0.20
		TIMES UP:반감 , 0.20
		TIMES UP:억울 , 0.20
		TIMES UP:18 , 2.00
	ELSEIF ABL:PLAYER:기교 < 5
		TIMES UP:수치 , 0.50
		TIMES UP:공포 , 0.50
		TIMES UP:반감 , 0.50
		TIMES UP:억울 , 0.50
		TIMES UP:18 , 1.50
	ENDIF
ENDIF

;발정기
IF TALENT:발정기
	TIMES UP:윤활 , 1.50
	TIMES UP:욕정 , 2.00
	TIMES UP:굴복 , 1.20
	TIMES UP:고통 , 0.80
	;未陥落なら
	IF !TALENT:연모 && !TALENT:친애 && !TALENT:음란 && !TALENT:창부 && !TALENT:복종 && !TALENT:예속
		TIMES UP:억울 , 1.20
	ENDIF

ENDIF
;-------------------------------------------------
;その他
;-------------------------------------------------
;고통각인
IF MARK:고통각인 == 3
	TIMES UP:고통 , 1.30
	TIMES UP:공포 , 1.30
ELSEIF MARK:고통각인 == 2
	TIMES UP:고통 , 1.20
	TIMES UP:공포 , 1.20
ELSEIF MARK:고통각인 == 1
	TIMES UP:고통 , 1.10
	TIMES UP:공포 , 1.10
ENDIF

;쾌락각인
IF MARK:쾌락각인 == 3
	TIMES UP:욕정 , 1.30
	TIMES UP:습득 , 1.30
ELSEIF MARK:쾌락각인 == 2
	TIMES UP:욕정 , 1.20
	TIMES UP:습득 , 1.20
ELSEIF MARK:쾌락각인 == 1
	TIMES UP:욕정 , 1.10
	TIMES UP:습득 , 1.10
ENDIF

;굴복각인
IF MARK:굴복각인 == 3
	TIMES UP:순종 , 1.30
	TIMES UP:굴복 , 1.30
ELSEIF MARK:굴복각인 == 2
	TIMES UP:순종 , 1.20
	TIMES UP:굴복 , 1.20
ELSEIF MARK:굴복각인 == 1
	TIMES UP:순종 , 1.10
	TIMES UP:굴복 , 1.10
ENDIF

;반발각인
IF MARK:반발각인 >= 3
	TIMES UP:순종 , 0.10
	TIMES UP:반감 , 1.30
ELSEIF MARK:반발각인 == 2
	TIMES UP:순종 , 0.40
	TIMES UP:반감 , 1.20
ELSEIF MARK:반발각인 == 1
	TIMES UP:순종 , 0.60
	TIMES UP:반감 , 1.10
ENDIF

;-------------------------------------------------
;難易度などによる上下の処理
;-------------------------------------------------
;EASY
IF FLAG:4 == 1
	TIMES UP:윤활 , 1.60
	TIMES UP:순종 , 1.60
	TIMES UP:욕정 , 1.60
	TIMES UP:굴복 , 1.60
	TIMES UP:습득 , 1.60
	TIMES UP:수치 , 1.60
	TIMES UP:고통 , 1.60
	TIMES UP:공포 , 1.60
	TIMES UP:반감 , 0.80
	TIMES UP:불쾌 , 0.80
	TIMES UP:억울 , 0.80
;NORMAL
ELSEIF FLAG:4 == 2
	TIMES UP:윤활 , 1.20
	TIMES UP:순종 , 1.20
	TIMES UP:욕정 , 1.20
	TIMES UP:굴복 , 1.20
	TIMES UP:습득 , 1.20
	TIMES UP:수치 , 1.20
	TIMES UP:고통 , 1.20
	TIMES UP:공포 , 1.20
	TIMES UP:반감 , 1.20
	TIMES UP:불쾌 , 1.20
	TIMES UP:억울 , 1.20
;HARD
ELSEIF FLAG:4 == 3
	TIMES UP:윤활 , 0.80
	TIMES UP:순종 , 0.80
	TIMES UP:욕정 , 0.80
	TIMES UP:굴복 , 0.80
	TIMES UP:습득 , 0.80
	TIMES UP:수치 , 0.80
	TIMES UP:고통 , 0.80
	TIMES UP:공포 , 0.80
	TIMES UP:반감 , 1.60
	TIMES UP:불쾌 , 1.60
	TIMES UP:억울 , 1.60
ENDIF

;-------------------------------------------------
;相性による上下の処理
;-------------------------------------------------
R = NO:PLAYER
;여자좋아、남자좋아、아이좋아
IF (TALENT:여자좋아 && MALE(PLAYER) == 0 && TALENT:PLAYER:소인체형 == 0) || (TALENT:남자좋아 && MALE(PLAYER) && TALENT:PLAYER:소인체형 == 0) || (TALENT:아이좋아 && TALENT:PLAYER:소인체형)
	IF RELATION:R == 0
		LOCAL:2 = 150
	ELSE
		LOCAL:2 = RELATION:R + 50
		SIF LOCAL:2 > 200
			LOCAL:2 = 200
	ENDIF
;남자혐오、여자혐오(연모陥落で無効)
ELSEIF (TALENT:남자혐오 && MALE(PLAYER) && (TALENT:연모 == 0 && TALENT:친애 == 0)) || (TALENT:여자혐오 && MALE(PLAYER) == 0 && (TALENT:연모 == 0 && TALENT:친애 == 0))
	IF RELATION:R == 0
		LOCAL:2 = 50
	ELSE
		LOCAL:2 = RELATION:R - 50
		SIF LOCAL:2 <= 0
		LOCAL:2 = 10
	ENDIF
ELSE
	LOCAL:2 = RELATION:R
ENDIF
IF LOCAL:2 != 0
	UP:욕정 *= LOCAL:2
	UP:욕정 /= 100
	UP:굴복 *= LOCAL:2
	UP:굴복 /= 100
	UP:수치 *= LOCAL:2
	UP:수치 /= 100
	UP:반감 *= 100
	UP:반감 /= LOCAL:2
	UP:불쾌 *= 100
	UP:불쾌 /= LOCAL:2
	UP:억울 *= 100
	UP:억울 /= LOCAL:2
ENDIF

;-------------------------------------------------
;同じコマンドの連続実行による上下の処理
;-------------------------------------------------
IF SELECTCOM == PREVCOM
	;UP:쾌C,UP:쾌V ,UP:쾌A,UP:쾌Bは絶頂に絡むので先に処理してある
	UP:순종 /= 2
	UP:욕정 /= 2
	UP:굴복 /= 2
	UP:습득 /= 2
	UP:수치 /= 2
	UP:고통 /= 2
	UP:공포 /= 2
ENDIF

;-------------------------------------------------
;기력０による上下の処理
;-------------------------------------------------
IF BASE:기력 <= 0
	;PRINTL ★기력０★
	;UP:쾌C,UP:쾌V ,UP:쾌A,UP:쾌Bは絶頂に絡むので先に処理してある
	UP:순종 /= 2
	UP:욕정 /= 2
	UP:굴복 /= 2
	UP:수치 /= 2
	UP:공포 /= 2
	UP:억울 /= 2

	LOSEBASE:체력 *= 2
	LOSEBASE:체력 += 80
ENDIF

;-------------------------------------------------
;고통からくる체력・기력の減少
;-------------------------------------------------
D = UP:고통/20
;ABL:마조끼をみる
IF ABL:마조끼 == 0
	TIMES D , 1.00
ELSEIF ABL:마조끼 == 1
	TIMES D , 0.95
ELSEIF ABL:마조끼 == 2
	TIMES D , 0.90
ELSEIF ABL:마조끼 == 3
	TIMES D , 0.80
ELSEIF ABL:마조끼 == 4
	TIMES D , 0.65
ELSE
	TIMES D , 0.50
ENDIF
;고통에강함
SIF TALENT:고통에강함
	TIMES D , 1.20
;고통에약함
SIF TALENT:고통에약함
	TIMES D , 0.80

LOSEBASE:체력 += D
LOSEBASE:기력 += D

;-------------------------------------------------
;체력・기력の減少
;-------------------------------------------------
;調教者が[위압]持ちだと気疲れする(上位陥落・붕괴・감정부족だと無効)
IF TALENT:PLAYER:위압 && !TALENT:친애 && !TALENT:창부 && !TALENT:예속 && !TALENT:붕괴 && !TALENT:감정부족
	TIMES LOSEBASE:체력 , 1.10
	TIMES LOSEBASE:기력 , 1.10
ENDIF
IF ZUIKI(TARGET)
	TIMES LOSEBASE:체력 , 1.20
	TIMES LOSEBASE:기력 , 1.20
ENDIF
BASE:체력 -= LOSEBASE:체력
IF BASE:체력 < 0
	BASE:체력 = 0
ELSEIF BASE:체력 > MAXBASE:체력
	BASE:체력 = MAXBASE:체력
ENDIF
BASE:기력 -= LOSEBASE:기력
IF BASE:기력 < 0
	BASE:기력 = 0
ELSEIF BASE:기력 > MAXBASE:기력
	BASE:기력 = MAXBASE:기력
ENDIF
;-------------------------------------------------
;고통쾌락경험、봉사쾌락경험のチェック
;-------------------------------------------------
CALL EXP_GOT_CHECK

;-------------------------------------------------
;セックス時の挿入継続フラグ
;TFLAG:31 = 今回の調教で처녀喪失
;-------------------------------------------------
TFLAG:60 = 0
SIF (SEXPLAY(TARGET) == 1 || SEXPLAY(TARGET) == 2) && !TFLAG:31 && CFLAG:TARGET:106 == 0
	TFLAG:60 = 1

;-------------------------------------------------
;調教者の사정時の입上
;-------------------------------------------------
CALL KOJO_MESSAGE_PALAMCNG_A
;-------------------------------------------------
;사정フラグはここで初期化
;-------------------------------------------------
CFLAG:TARGET:106 = 0
;-------------------------------------------------
;촉수の사정時の입上
;-------------------------------------------------
CALL KOJO_MESSAGE_PALAMCNG_E
;-------------------------------------------------
;奴隷の絶頂時の입上
;-------------------------------------------------
CALL KOJO_MESSAGE_PALAMCNG_B
;-------------------------------------------------
;絶頂時の放尿処理
;-------------------------------------------------
CALL ORGASM_ADD_URINE


;=======================================================
;着てない服に汚れが付いてしまうことがあるので暫定処置的な？
;=======================================================
CALL CLOTHES_STAIN_3

;-------------------------------------------------
;調教후の입上
;-------------------------------------------------
CALL KOJO_MESSAGE_PALAMCNG_C
;-------------------------------------------------
;パラメータ変動による입上
;-------------------------------------------------
CALL KOJO_MESSAGE_PALAMCNG_D

;-------------------------------------------------
;미약の効果が切れたとき
;-------------------------------------------------
;効果が切れる
IF TFLAG:69 >= 10
	TEQUIP:미약 = 0
	TFLAG:13 = 73
	CALL KOJO_MESSAGE_EVENT
	TFLAG:69 = 0
ENDIF

;-------------------------------------------------
;お漏らし입上もここに入れてみる
;-------------------------------------------------
IF TFLAG:58 || TFLAG:68
	TFLAG:13 = 71
	CALL KOJO_MESSAGE_EVENT
ENDIF

;-------------------------------------------------
;嘔吐입上
;-------------------------------------------------
IF TFLAG:75
	TFLAG:13 = 78
	CALL KOJO_MESSAGE_EVENT
ENDIF

;-------------------------------------------
;윤간후
;-------------------------------------------
IF SELECTCOM == 322
	TFLAG:13 = 77
	CALL KOJO_MESSAGE_EVENT
ENDIF

;-------------------------------------------------
;刻印取得のチェック
;-------------------------------------------------
CALL MARK_GOT_CHECK
;-------------------------------------------------
;刻印取得による입上
;-------------------------------------------------
CALL KOJO_MESSAGE_MARKCNG

;-------------------------------------------------
;コマンド実行후の입上
;-------------------------------------------------
CALL KOJO_MESSAGE_COMEND

;-------------------------------------------------
;순종上昇による[저항]の消滅チェック
;-------------------------------------------------
CALL JUJUN_UP_CHECK

;-------------------------------------------------
;調教ソースの表示
;-------------------------------------------------
CALL SHOW_SOURCE

;-------------------------------------------------
;数値変動の表示
;-------------------------------------------------
;相性
R = NO:PLAYER
SIF RELATION:R == 0
	LOCAL:2 = 100
;여자좋아、남자좋아、아이좋아
IF (TALENT:여자좋아 && MALE(PLAYER) == 0 && TALENT:PLAYER:소인체형 == 0) || (TALENT:남자좋아 && MALE(PLAYER) && TALENT:PLAYER:소인체형 == 0) || (TALENT:아이좋아 && TALENT:PLAYER:소인체형)
	IF RELATION:R == 0
		LOCAL:2 = 150
	ELSE
		LOCAL:2 = RELATION:R + 50
		SIF LOCAL:2 > 200
			LOCAL:2 = 200
	ENDIF
;남자혐오、여자혐오(연모陥落で無効)
ELSEIF (TALENT:남자혐오 && MALE(PLAYER) && (TALENT:연모 == 0 && TALENT:친애 == 0)) || (TALENT:여자혐오 && MALE(PLAYER) == 0 && (TALENT:연모 == 0 && TALENT:친애 == 0))
	IF RELATION:R == 0
		LOCAL:2 = 50
	ELSE
		LOCAL:2 = RELATION:R - 50
		SIF LOCAL:2 <= 0
		LOCAL:2 = 10
	ENDIF
ELSE
	LOCAL:2 = RELATION:R
ENDIF
SIF LOCAL:2 != 0
	PRINTFORML ＜相性{C/100}.{C%100}倍＞

;同じコマンドの連続実行
SIF SELECTCOM == PREVCOM
	PRINTL ＜同一コマンド連続実行＞

;今回のコマンドを「前回のコマンド」とする
PREVCOM = SELECTCOM

;前回の調教者が助손か主人か
IF ASSIPLAY
	TFLAG:50 = 1
ELSE
	TFLAG:50 = 0
ENDIF

;기력０
SIF BASE:기력 <= 0
	PRINTL ★기력０★

;체력・기력の減少
PRINT 체력-
PRINTV LOSEBASE:체력
PRINT  기력-
PRINTVL LOSEBASE:기력

;-------------------------------------------------
;사정후の再装填処理
;-------------------------------------------------
REPEAT CHARANUM
	SIF CFLAG:COUNT:9 > 0
		CFLAG:COUNT:9 -= 1
REND

;-------------------------------------------------
;パラメータの上昇＆表示（DOWNもここで）
;-------------------------------------------------
IF FLAG:153 == 0
	UPCHECK
ELSE
	CALL UPCHECK_ANIME
ENDIF

;-------------------------------------------------
;調教者の珠ゲット
;-------------------------------------------------
CALL PLAYER_JUEL_GET


