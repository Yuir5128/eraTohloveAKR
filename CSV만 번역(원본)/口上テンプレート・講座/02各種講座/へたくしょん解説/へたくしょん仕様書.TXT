;-------------------------------------------------
へたくしょん仕様書
;-------------------------------------------------


;=============================================================================
;erahetaAの仕様に関する関数群
;=============================================================================
;-------------------------------------------------
;-------------------------------------------------
@COMF999
駆け落ちイベント用「調教を強制終了させる」機能
使用変数 …	TFLAG:400 ～ 401
		400 = キャラ削除の有無を判定
		401 = 駆け落ち対象の購入可能フラグを弄るかどうかの判定
;-------------------------------------------------

EVENTTRAINからEVENTTURNENDが直接呼び出せない、
更にキャラ削除をするとTEQUIPの確認などでエラー落ちしてしまうのを防ぐための機能です。
입上側で
NEXTCOM = 999
を宣言することで、珠の取得などを全てかっ飛ばしいきなり日付を変更させます。
また、TFLAG:400を1にしてから宣言するとターゲットの削除を同時に行います。
更にTFLAG:401をキャラ番号にしてから宣言することで
駆け落ち対象の購入不可フラグを立てることもできますが、
こちらは現状駆け落ち입上が書かれている伊兄弟分の分岐しか用意していません。

駆け落ちイベントに限らず開幕で調教を強制終了させたい場合も利用可能です。
珠の取得を省略するので、NEXTCOM宣言は必ず調教開始前입上で行ってください。


;-------------------------------------------------
;-------------------------------------------------
@MASTERBIRTDAY
「主人の誕生日をサーチする」機能
使用変数 …	B:1
;-------------------------------------------------

CALLすることで、主人の誕生日を自動でサーチしてきます。
当日が誕生日であればB:1に1が、一週間以内に誕生日が来るならB:1に2が代入されて返ってきます。
判定できる誕生日には一部非公式設定が混ざっています。
現在判定できるのは

1	普(18)
2	希(3)、日(11)、西(12)、立(18)、愛(24)、埃(28)
3	伊兄弟(17)
4	該当者なし
5	玖(20)
6	典(6)、洪(8)、氷(17)、セー(29)
7	加(1)、米(4)、列(12)、仏(14)、波(22)
8	瑞(1)、韓(15)、鳥(24)、辺(25)
9	海(2)
10	中(10)、湾(25)、墺(26)、土(29)
11	拉(18)
12	芬(6)、露(30)

となっています。


;-------------------------------------------------
;-------------------------------------------------
@COMPARE_BSIZE
「가슴のサイズを比較する」機能
使用変数 …	A、A:1、A:2、B、B:1、B:2
		A 及び B = 比較対象の登録番号
		A:1 = Aの가슴サイズ(|0 절벽 |1 빈유 |2 素質なし |3 거유 |4 폭유)
		A:2 = Bの가슴サイズ(同)
		B:1 = 勝者の登録番号(引き分けの場合は-1)
		B:2 = その差
;-------------------------------------------------

CALLすることで、2者の가슴サイズを比較します。
登録番号の取得はぱんくしょんの@NO関数やMASTERやTARGET、ASSIなど使ってください。


;-------------------------------------------------
;-------------------------------------------------
@COMPARE_CSIZE
「下のサイズを比較する」機能
使用変数 …	A、A:1、A:2、B、B:1、B:2
		A 及び B = 比較対象の登録番号
		A:1 = Aの下半身サイズ(|0 아이사이즈 |1 단소 |2 素質なし |3 거근 |4 말자지)
		A:2 = Bの下半身サイズ(同)
		B:1 = 勝者の登録番号(引き分けの場合は-1)
		B:2 = その差
;-------------------------------------------------
CALLすることで、2者の下半身のサイズを比較します。
登録番号の取得はぱんくしょんの@NO関数やMASTERやTARGET、ASSIなど使ってください。



;=============================================================================
;面識機能に関する関数群
;=============================================================================
;-------------------------------------------------
;-------------------------------------------------
@SAVE_MEMBER
「ここ一週間以内の調教対象と助손を記録する」機能
使用変数 …	PREVCOM:801 ～ 830
			801 ～ 814 = ここ一週間の奴隷のキャラ番号
			815 ～ 828 = ここ一週間の助손
			829 = 保存用
			830 = 保存用
;-------------------------------------------------

調教終了時と日付変更時に勝손に起動しているので、こちらで何かする必要はありません。
調教終了時にPREVCOM:829に奴隷のキャラ番号を、PREVCOM:830に助손のキャラ番号を格納し
日付変更時の奴隷・助손と一致していればPREVCOM:801とPREVCOM:815にそれぞれの番号を記録します。
もし違っていた場合＝調教終了画面を見ていなかった場合は
誰にも会っていないと判断してそれぞれのPREVCOMに-1を登録します。
この履歴は、最新14件まで記録されます。


;-------------------------------------------------
;-------------------------------------------------
@SAVE_ACQUAINTANCE_DAILY_LIFE
@SAVE_ACQUAINTANCE_ASSI
「助손や日常パッチでの面識管理」機能
使用変数 …	CFLAG:799 ～ 898
		799 + キャラ番号 = それぞれの面識管理フラグ
;-------------------------------------------------

@SAVE_MEMBER関数で勝손に呼び出されているファイルです。
これもこちらで何かをする必要はありません。
調教終了時に助손がいる、もしくは日常イベントで複数名が登場した場合に、
お互いのお互いに対する面識フラグを更新しています。
입上側で面識がある場合の分岐を作っていない場合はこれといって意味がありません。


;-------------------------------------------------
;-------------------------------------------------
GET_MEMBER_TARGET
「ここ一週間以内の調教対象をサーチする」機能
使用変数 …	R、D:1、D:2
		R = サーチ対象のキャラ番号
		D:1 = 最후に会ったのが何日前か(0なら当日。以下1日前、2日前と続く)
		D:2 = 最후に会ったのが何回前か(1回前、2回前と続く)
;-------------------------------------------------

R = サーチ対象のキャラ番号を指定してからCALLすることで機能します。
PREVCOM:801～814に記録されたキャラ番号と照合し、
より最新の日付をそれぞれに出力します。


;-------------------------------------------------
;-------------------------------------------------
@GET_MEMBER_ASSI
「ここ一週間以内の助손をサーチする」機能
使用変数 …	R、D:3、D:4
		R = サーチ対象のキャラ番号
		D:3 = 最후に助손にしたのが何日前か(0なら当日。以下1日前、2日前と続く)
		D:4 = 最후に助손にしたのが何回前か(1回前、2回前と続く)
;-------------------------------------------------

使い方やサーチ内容はGET_MEMBER_TARGETと同じです。


;-------------------------------------------------
;-------------------------------------------------
@GET_LOSTPURE
「입上主の동정、처녀、후처녀を奪った相손をサーチする」機能
使用変数 …	R、L
		R = サーチ対象の指定
		L = 奪った相손のキャラ番号
;-------------------------------------------------

Rに동정なら1、처녀なら4、후처녀なら16を入れてCALLすることで、
Lにそれを奪った相손のキャラ番号を格納します。
この際、関数側で@LOSTNAMEを呼び出しているので、
STR:1には奪ったキャラの名前が一緒に格納されています。
裏技的な使い方としては、Rに64を入れることで
입上主に낙인を付けた相손をサーチすることができます。


;-------------------------------------------------
;-------------------------------------------------
@GET_EATPURE
「입上主が今までに奪ってきた동정、처녀、후처녀の人数をサーチする」機能
使用変数 …	E:1、E:2、E:3
		E:1 = 동정食いの人数
		E:2 = 처녀食いの人数
		E:3 = 후처녀食いの人数
;-------------------------------------------------

CALLすることで、E:1に동정、E:2に처녀、E:3に후처녀を奪ってきた人数を格納します。


;=============================================================================
;勝손にウフフ機能に関する関数群
;=============================================================================
;-------------------------------------------------
;-------------------------------------------------
@TARGETPLAY_NEXT
「調教対象から奉仕・역조교コマンドを実行してくれる」機能
使用変数 …	NEXTCOM:0 ～ 7
			0 = 次に実行するコマンド
			1 = 次に実行するコマンド予約
			2 ～ 4 = 今후の拡張で使用予定
			5 = 「調教対象が指定した」フラグ(現状動作してるかが怪しい)
			6 = 制御用フラグ
			7 = 無限ループ回避フラグ
;-------------------------------------------------

ターゲットの素質や気分でランダムに選ばせたい時		 … CALL TARGETPLAY_NEXT
奉仕系コマンドに限定して次のコマンドを選ばせたい時	 … CALL TARGETPLAY_NEXT_H
同様に、역조교系コマンドに限定して選ばせたい時		 … CALL TARGETPLAY_NEXT_G
をそれぞれ宣言することで発動します。
いくつかある選択肢の中からランダムでコマンドを選び、
実行可能だった場合強制的にターンが進んで選ばれたコマンドを実行します。
